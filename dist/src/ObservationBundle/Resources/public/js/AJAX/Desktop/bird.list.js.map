{"version":3,"sources":["../../../../../../../../src/ObservationBundle/Resources/public/js/AJAX/Desktop/bird.list.js"],"names":["$","document","ready","page","scrollHeight","window","scrollTop","ajax","url","getUrl","dataType","success","code_html","status","on","prepareRequete","event","empty","parameter","val","isSearch","removeAttr","console","log","attr","append","numbers","Number","data","length","remove","location","scroll","height","css"],"mappings":"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","file":"bird.list.js","sourcesContent":["// Requetes AJAX sur la pagination et recherche des oiseaux\n// Appeller dans la vue Bird/Desktop/list.html.twig\n$(document).ready(function () {\n    // Création de la variable page\n    var page = 1\n    // Variable contenant la hauteur du scroll\n    var scrollHeight = $(window).scrollTop();\n    // Première requete ajax lors du chargement de la page\n    $.ajax({\n        url: getUrl(),\n        dataType: 'html',\n        success: function (code_html, status) {\n            success(code_html)\n        }\n    })\n\n    // Requte Ajax lors du click sur le bouton add\n    $('#add-birds').on('click', function () {\n        prepareRequete(false)\n        $.ajax({\n            url: getUrl(),\n            dataType: 'html',\n            success: function (code_html, status) {\n                success(code_html)\n            }\n        })\n    })\n    // Requete ajax lors d'une recherche\n    $('#search').on('keyup', function (event) {\n        prepareRequete(true)\n        $.ajax({\n            url: getUrl(),\n            dataType: 'html',\n            success: function (code_html, status) {\n                $('#birds').empty()\n                success(code_html)\n            }\n        })\n    })\n\n    // Fonction générant l'url des requetes ajax\n    function getUrl() {\n        // On vérifie le contenue de l'input search,\n        // S'il n'est pas vide on créer un parametre GET search avec sa valeur\n        var parameter = $('#search').val() == '' ? '' : '?search=' + $('#search').val();\n        var url = '/NAO/web/app_dev.php/bird/pagination/' + page + parameter;\n\n        return '/NAO/web/app_dev.php/bird/pagination/' + page + parameter;\n    }\n\n    // Fonction préparant la zone d'affichage\n    function prepareRequete(isSearch) {\n        // On affiche le loader\n        $('.loader').removeAttr('hidden');\n        // S'il s'agit d'une recherche on vide le contenue de contentBirds et on met page à 1\n        if(isSearch){\n            console.log('coucou')\n            $('#birds').empty();\n            page =1\n        }\n        // On passe la hauteur du scroll à la variable scrollHeigth\n        scrollHeight = $(window).scrollTop();\n    }\n\n    // Fonction utiliser lors du success d'une requete\n    function success(code_html){\n        // On bloque la vue sur la hauteur du scroll\n        $(window).scrollTop(scrollHeight);\n        // on cache le loader\n        $('.loader').attr('hidden', true)\n        // On inserre le resultat dans la zone contentBirds\n        $('#birds').append(code_html)\n        // On récuperer la taille du resultat\n        var numbers = Number($('.length').data('length'));\n        // On comparse celui-ci à 20 et aux nombres d'oiseaux affiché s'ils correspondent celà signifie qu'il n'y a pas d'autres pages\n        if(numbers <= 20 || numbers == $('.bird').length ){\n            // On cache donc le bouton add\n            $('#add-birds').attr('hidden', true);\n        }else{\n            // Sinon on l'affiche\n            $('#add-birds').removeAttr('hidden');\n        }\n        // On supprime le div comptenant la taille du resultat pour évité les doublons\n        $('.length').remove();\n\n        // On incrimente la page pour le prochain add\n        page++;\n    }\n    // listener sur les div des oiseaux pour généreer un ien au click\n    $(document).on('click', '.bird', function (event) {\n        console.log($(this))\n        window.document.location = $(this).data('href');\n    })\n\n\n    $(window).scroll(function () {\n        console.log($(window).height() + 'ecran')\n        console.log($(document).height() + ' document')\n        console.log($(window).scrollTop() + 'scroll')\n\n        // On vérifie si le document fait 2 fois la taille de l'ecran et si le haut du scroll est superieur à 2 fois la taille de l'écran\n        if(($(window).height() * 2) < $(document).height() && $(window).scrollTop() > ($(window).height() *2) ){\n            // Dans ce cas on affiche le bouton up\n            $('#up').css('display', 'inline');\n        }else {\n            // Sinon on le cache\n            $('#up').css('display', 'none');\n        }\n    })\n    $('#up-button').on('click', function(){\n        // Si on clique sur le bouton up, on reviens tout en haut du document\n        $(window).scrollTop(0);\n    })\n})\n"]}