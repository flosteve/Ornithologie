{
  "version": 3,
  "sources": [
    "../../../../../../../web/bundles/observation/js/AJAX/Mobile/bird.list.js"
  ],
  "names": [
    "$",
    "document",
    "ready",
    "$birds",
    "$search",
    "$addBirds",
    "$colorBec",
    "$colorPlumage",
    "$colorPatte",
    "page",
    "getParameters",
    "searchParameter",
    "val",
    "becParameter",
    "patteParameter",
    "plumageParameter",
    "parameters",
    "ajax",
    "url",
    "data",
    "dataType",
    "success",
    "code_html",
    "status",
    "window",
    "scroll",
    "scrollTop",
    "height",
    "css",
    "prepareRequete",
    "replace",
    "on",
    "event",
    "empty",
    "isSearch",
    "removeAttr",
    "attr",
    "append",
    "numbers",
    "Number",
    "length",
    "remove",
    "console",
    "log",
    "location",
    "preventDefault",
    "$filter"
  ],
  "mappings": "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",
  "file": "bird.list.js",
  "sourcesContent": [
    "$(document).ready(function () {\n    // Récuperation des differents elements\n    var $birds = $('#birds');\n    var $search = $('#search');\n    var $addBirds = $('#add-birds');\n    var $colorBec = $('#color-bec');\n    var $colorPlumage = $('#color-plumage');\n    var $colorPatte = $('#color-patte');\n    // Création de la variable page\n    var page = 1\n\n    // Fonction qui gerer la liste des parametres GET passer aux requetes\n    function getParameters() {\n        var searchParameter = $search.val() === '' ? '' : 'search=' + $search.val() + '&';\n        var becParameter = $colorBec.val() === '' ? '' : 'bec=' + $colorBec.val() + '&';\n        var patteParameter = $colorPatte.val() === '' ? '' : 'patte=' + $colorPatte.val() + '&';\n        var plumageParameter = $colorPlumage.val() === '' ? '' : 'plumage=' + $colorPlumage.val() + '&';\n        var parameters = '?' + searchParameter + becParameter + patteParameter + plumageParameter;\n        return parameters;\n    }\n\n    // Première requete ajax lors du chargement de la page\n    $.ajax({\n        url: $birds.data('href'),\n        dataType: 'html',\n        success: function (code_html, status) {\n            success(code_html)\n        }\n    })\n\n    //Génération d'un scroll infinie\n\n    // On crée une data pour évité de lancé une requete plusieur fois d'affilé\n    // Et une autre pour définir la fin de la page\n    $(window).data('ajaxready', true);\n    $(window).data('endPage', false);\n    // On mets une fonction au scroll\n    $(window).scroll(function () {\n        // Si le scroll est plus bas que la hauteur de l'écran, on affiche le bouton up\n\n        if ($(window).scrollTop() >= $(window).height()) {\n            $('#up').css('display', 'inline')\n\n        } else {\n            //sinon on le cache\n            $('#up').css('display', 'none')\n        }\n\n        // On vérife la valeur de ajaxready ou celle de endPAge\n        if ($(window).data('ajaxready') == false || $(window).data('endPage') == true) {\n            // Si elle est fausse, on quitte l'event\n            return;\n        }\n        // Sinon on vérife la position du scroll.\n        // si l'addition du scroll + la hauteur de l'a vue et unmarge de 150  est égale ou superieur à la longeur de la page, on va lancé une requete ajax\n        if (($(window).scrollTop() + $(window).height() + 150 ) >= $(document).height()) {\n            // On commence par passé à false aaxready\n            $(window).data('ajaxready', false);\n            // On prépare pour la requete\n            prepareRequete(false);\n            var url = $birds.data('href').replace('1', page);\n            $.ajax({\n                url: url + getParameters(),\n                dataType: 'html',\n                success: function (code_html, status) {\n                    success(code_html)\n                    // La requete étant finit, on passe ajaxready à true\n                    $(window).data('ajaxready', true)\n                }\n            })\n        }\n    })\n\n    // Requete ajax lors d'une recherche\n    $search.on('keyup', function (event) {\n        prepareRequete(true)\n        let url = $('#search').data('href');\n        $.ajax({\n            url: url + getParameters(),\n            dataType: 'html',\n            success: function (code_html, status) {\n                $('#birds').empty();\n                success(code_html)\n            }\n        })\n    })\n    // Event sur les select du filtre\n    $('select').on('change', function () {\n        prepareRequete(true);\n        let url = $birds.data('href') + getParameters();\n        $.ajax({\n            url: url,\n            dataType: 'html',\n            success: function (code_html, status) {\n                $birds.empty()\n                success(code_html)\n            }\n        })\n    })\n    // Fonction préparant la zone d'affichage\n    function prepareRequete(isSearch) {\n        // On affiche le loader\n        $('loader').removeAttr('hidden');\n        // S'il s'agit d'une recherche on vide le contenue de contentBirds et on met page à 1\n        if (isSearch) {\n            $('#birds').empty();\n            page = 1\n        }\n    }\n\n    // Fonction utiliser lors du success d'une requete\n    function success(code_html) {\n        // on cache le loader\n        $('.loader').attr('hidden', true)\n        // On inserre le resultat dans la zone contentBirds\n        $birds.append(code_html)\n        // On récuperer la taille du resultat\n        var numbers = Number($('.length').data('length'));\n        // On comparse celui-ci à 20 et aux nombres d'oiseaux affiché s'ils correspondent celà signifie qu'il n'y a pas d'autres pages\n        if (numbers <= 20 || numbers == $('.bird').length) {\n            // On passe endPage à true\n            $(window).data('endPage', true);\n        } else {\n            // Sinon on l'affiche\n            $(window).data('endPage', false)\n        }\n        // On supprime le div comptenant la taille du resultat pour évité les doublons\n        $('.length').remove();\n\n        // On incrimente la page pour le prochain add\n        page++;\n    }\n\n    // Event sur le bouton up-button qui remets le scroll en  haut de page\n    $(\"#up-button\").on('click', function (event) {\n        $(window).scrollTop(0);\n    })\n//                 listener sur les div des oiseaux pour généreer un ien au click\n    $(document).on('click', '.bird', function (event) {\n        console.log($(this))\n        window.document.location = $(this).data('href');\n    })\n    $('#action-filter').on('click', function (event) {\n        event.preventDefault();\n        var $filter = $('#filter');\n        if($filter.attr('hidden')){\n            $filter.removeAttr('hidden')\n        }else{\n            $filter.attr('hidden', 'hidden')\n        }\n    })\n})"
  ]
}