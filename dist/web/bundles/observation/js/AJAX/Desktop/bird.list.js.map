{
  "version": 3,
  "sources": [
    "../../../../../../../web/bundles/observation/js/AJAX/Desktop/bird.list.js"
  ],
  "names": [
    "$",
    "document",
    "ready",
    "$birds",
    "$search",
    "$addBirds",
    "$colorBec",
    "$colorPlumage",
    "$colorPatte",
    "page",
    "ajax",
    "url",
    "data",
    "dataType",
    "success",
    "code_html",
    "status",
    "getParameters",
    "searchParameter",
    "val",
    "becParameter",
    "patteParameter",
    "plumageParameter",
    "parameters",
    "on",
    "event",
    "preventDefault",
    "prepareRequete",
    "replace",
    "empty",
    "isSearch",
    "removeAttr",
    "attr",
    "append",
    "numbers",
    "Number",
    "length",
    "remove",
    "window",
    "location"
  ],
  "mappings": "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",
  "file": "bird.list.js",
  "sourcesContent": [
    "// Requetes AJAX sur la pagination et recherche des oiseaux\n// Appeller dans la vue Bird/Desktop/list.html.twig\n$(document).ready(function () {\n    // Récuperation des differents elements\n    var $birds = $('#birds');\n    var $search = $('#search');\n    var $addBirds = $('#add-birds');\n    var $colorBec = $('#color-bec');\n    var $colorPlumage = $('#color-plumage');\n    var $colorPatte = $('#color-patte');\n    // Création de la variable page\n    var page = 1\n\n    // Première requete ajax lors du chargement de la page\n    $.ajax({\n        url: $birds.data('href'),\n        dataType: 'html',\n        success: function (code_html, status) {\n            success(code_html)\n        }\n    })\n    // Fonction qui gerer la liste des parametres GET passer aux requetes\n    function getParameters() {\n        var searchParameter = $search.val() === '' ? '' : 'search=' + $search.val() + '&';\n        var becParameter = $colorBec.val() === '' ? '' : 'bec=' + $colorBec.val() + '&';\n        var patteParameter = $colorPatte.val() === '' ? '' : 'patte=' + $colorPatte.val() + '&';\n        var plumageParameter = $colorPlumage.val() === '' ? '' : 'plumage=' + $colorPlumage.val() + '&';\n        var parameters = '?' + searchParameter + becParameter + patteParameter + plumageParameter;\n        return parameters;\n    }\n\n    // Requte Ajax lors du click sur le bouton add\n    $addBirds.on('click', function (event) {\n        event.preventDefault();\n        prepareRequete(false);\n        var url = $addBirds.data('href').replace(\"1\", page) + getParameters() ;\n\n        $.ajax({\n            url: url + parameters,\n            dataType: 'html',\n            success: function (code_html, status) {\n                success(code_html)\n            }\n        })\n    })\n    // Requete ajax lors d'une recherche\n    $search.on('keyup', function (event) {\n        prepareRequete(true );\n        let url = $search.data('href') + getParameters();\n         $.ajax({\n            url: url,\n            dataType: 'html',\n            success: function (code_html, status) {\n                $birds.empty()\n                success(code_html)\n            }\n        })\n    })\n\n    // Event sur les select du filtre\n    $('select').on('change', function () {\n        prepareRequete(true);\n        let url = $birds.data('href') + getParameters();\n        $.ajax({\n            url: url,\n            dataType: 'html',\n            success: function (code_html, status) {\n                $birds.empty()\n                success(code_html)\n            }\n        })\n    })\n\n    // Fonction préparant la zone d'affichage\n    function prepareRequete(isSearch) {\n        // On affiche le loader\n        $('.loader').removeAttr('hidden');\n        // S'il s'agit d'une recherche on vide le contenue de contentBirds et on met page à 1\n        if(isSearch){\n            $birds.empty();\n            page =1\n        }\n    }\n\n    // Fonction utiliser lors du success d'une requete\n    function success(code_html){\n        // on cache le loader\n        $('.loader').attr('hidden', true)\n        // On inserre le resultat dans la zone contentBirds\n        $birds.append(code_html)\n        // On récuperer la taille du resultat\n        var numbers = Number($('.length').data('length'));\n        // On comparse celui-ci à 20 et aux nombres d'oiseaux affiché s'ils correspondent celà signifie qu'il n'y a pas d'autres pages\n        if(numbers <= 20 || numbers == $('.bird').length ){\n            // On cache donc le bouton add\n            $addBirds.attr('hidden', true);\n        }else{\n            // Sinon on l'affiche\n            $addBirds.removeAttr('hidden');\n        }\n        // On supprime le div comptenant la taille du resultat pour évité les doublons\n        $('.length').remove();\n\n        // On incrimente la page pour le prochain add\n        page++;\n    }\n\n    // listener sur les div des oiseaux pour généreer un ien au click\n    $(document).on('click', '.bird', function (event) {\n        window.document.location = $(this).data('href');\n    })\n\n})\n"
  ]
}