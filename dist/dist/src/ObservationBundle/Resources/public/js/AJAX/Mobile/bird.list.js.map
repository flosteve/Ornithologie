{
  "version": 3,
  "sources": [
    "../../../../../../../../src/ObservationBundle/Resources/public/js/AJAX/Mobile/bird.list.js"
  ],
  "names": [
    "$",
    "document",
    "ready",
    "$birds",
    "$search",
    "$addBirds",
    "$colorBec",
    "$colorPlumage",
    "$colorPatte",
    "page",
    "getParameters",
    "searchParameter",
    "val",
    "becParameter",
    "patteParameter",
    "plumageParameter",
    "parameters",
    "ajax",
    "url",
    "data",
    "dataType",
    "success",
    "code_html",
    "status",
    "_success",
    "window",
    "scroll",
    "scrollTop",
    "height",
    "css",
    "prepareRequete",
    "replace",
    "on",
    "event",
    "empty",
    "isSearch",
    "removeAttr",
    "attr",
    "append",
    "numbers",
    "Number",
    "length",
    "remove",
    "console",
    "log",
    "location",
    "preventDefault",
    "$filter"
  ],
  "mappings": "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",
  "file": "bird.list.js",
  "sourcesContent": [
    "'use strict';\n\n$(document).ready(function () {\n    // Récuperation des differents elements\n    var $birds = $('#birds');\n    var $search = $('#search');\n    var $addBirds = $('#add-birds');\n    var $colorBec = $('#color-bec');\n    var $colorPlumage = $('#color-plumage');\n    var $colorPatte = $('#color-patte');\n    // Création de la variable page\n    var page = 1;\n\n    // Fonction qui gerer la liste des parametres GET passer aux requetes\n    function getParameters() {\n        var searchParameter = $search.val() === '' ? '' : 'search=' + $search.val() + '&';\n        var becParameter = $colorBec.val() === '' ? '' : 'bec=' + $colorBec.val() + '&';\n        var patteParameter = $colorPatte.val() === '' ? '' : 'patte=' + $colorPatte.val() + '&';\n        var plumageParameter = $colorPlumage.val() === '' ? '' : 'plumage=' + $colorPlumage.val() + '&';\n        var parameters = '?' + searchParameter + becParameter + patteParameter + plumageParameter;\n        return parameters;\n    }\n\n    // Première requete ajax lors du chargement de la page\n    $.ajax({\n        url: $birds.data('href'),\n        dataType: 'html',\n        success: function success(code_html, status) {\n            _success(code_html);\n        }\n    });\n\n    //Génération d'un scroll infinie\n\n    // On crée une data pour évité de lancé une requete plusieur fois d'affilé\n    // Et une autre pour définir la fin de la page\n    $(window).data('ajaxready', true);\n    $(window).data('endPage', false);\n    // On mets une fonction au scroll\n    $(window).scroll(function () {\n        // Si le scroll est plus bas que la hauteur de l'écran, on affiche le bouton up\n\n        if ($(window).scrollTop() >= $(window).height()) {\n            $('#up').css('display', 'inline');\n        } else {\n            //sinon on le cache\n            $('#up').css('display', 'none');\n        }\n\n        // On vérife la valeur de ajaxready ou celle de endPAge\n        if ($(window).data('ajaxready') == false || $(window).data('endPage') == true) {\n            // Si elle est fausse, on quitte l'event\n            return;\n        }\n        // Sinon on vérife la position du scroll.\n        // si l'addition du scroll + la hauteur de l'a vue et unmarge de 150  est égale ou superieur à la longeur de la page, on va lancé une requete ajax\n        if ($(window).scrollTop() + $(window).height() + 150 >= $(document).height()) {\n            // On commence par passé à false aaxready\n            $(window).data('ajaxready', false);\n            // On prépare pour la requete\n            prepareRequete(false);\n            var url = $birds.data('href').replace('1', page);\n            $.ajax({\n                url: url + getParameters(),\n                dataType: 'html',\n                success: function success(code_html, status) {\n                    _success(code_html);\n                    // La requete étant finit, on passe ajaxready à true\n                    $(window).data('ajaxready', true);\n                }\n            });\n        }\n    });\n\n    // Requete ajax lors d'une recherche\n    $search.on('keyup', function (event) {\n        prepareRequete(true);\n        var url = $('#search').data('href');\n        $.ajax({\n            url: url + getParameters(),\n            dataType: 'html',\n            success: function success(code_html, status) {\n                $('#birds').empty();\n                _success(code_html);\n            }\n        });\n    });\n    // Event sur les select du filtre\n    $('select').on('change', function () {\n        prepareRequete(true);\n        var url = $birds.data('href') + getParameters();\n        $.ajax({\n            url: url,\n            dataType: 'html',\n            success: function success(code_html, status) {\n                $birds.empty();\n                _success(code_html);\n            }\n        });\n    });\n    // Fonction préparant la zone d'affichage\n    function prepareRequete(isSearch) {\n        // On affiche le loader\n        $('loader').removeAttr('hidden');\n        // S'il s'agit d'une recherche on vide le contenue de contentBirds et on met page à 1\n        if (isSearch) {\n            $('#birds').empty();\n            page = 1;\n        }\n    }\n\n    // Fonction utiliser lors du success d'une requete\n    function _success(code_html) {\n        // on cache le loader\n        $('.loader').attr('hidden', true);\n        // On inserre le resultat dans la zone contentBirds\n        $birds.append(code_html);\n        // On récuperer la taille du resultat\n        var numbers = Number($('.length').data('length'));\n        // On comparse celui-ci à 20 et aux nombres d'oiseaux affiché s'ils correspondent celà signifie qu'il n'y a pas d'autres pages\n        if (numbers <= 20 || numbers == $('.bird').length) {\n            // On passe endPage à true\n            $(window).data('endPage', true);\n        } else {\n            // Sinon on l'affiche\n            $(window).data('endPage', false);\n        }\n        // On supprime le div comptenant la taille du resultat pour évité les doublons\n        $('.length').remove();\n\n        // On incrimente la page pour le prochain add\n        page++;\n    }\n\n    // Event sur le bouton up-button qui remets le scroll en  haut de page\n    $(\"#up-button\").on('click', function (event) {\n        $(window).scrollTop(0);\n    });\n    //                 listener sur les div des oiseaux pour généreer un ien au click\n    $(document).on('click', '.bird', function (event) {\n        console.log($(this));\n        window.document.location = $(this).data('href');\n    });\n    $('#action-filter').on('click', function (event) {\n        event.preventDefault();\n        var $filter = $('#filter');\n        if ($filter.attr('hidden')) {\n            $filter.removeAttr('hidden');\n        } else {\n            $filter.attr('hidden', 'hidden');\n        }\n    });\n});\n//# sourceMappingURL=bird.list.js.map"
  ]
}