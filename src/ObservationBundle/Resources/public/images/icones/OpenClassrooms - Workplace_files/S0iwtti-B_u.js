if (self.CavalryLogger) { CavalryLogger.start_js(["5mX4K"]); }

__d('ReactComposerWorkFileActionsImpl',['ReactComposerWorkFileActionType','ReactComposerDispatcher'],(function a(b,c,d,e,f,g){h.prototype.reset=function(i){'use strict';c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerWorkFileActionType').RESET});};h.prototype.saveAppFile=function(i,j,k){'use strict';c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerWorkFileActionType').SAVE_APP_FILE,id:j,name:k});};h.prototype.removeAppFile=function(i,j){'use strict';c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerWorkFileActionType').REMOVE_APP_FILE,id:j});};h.prototype.saveFile=function(i,j){'use strict';c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerWorkFileActionType').SAVE_FILE,name:j.name,file:j.file});};h.prototype.setConfig=function(i,j){'use strict';c('ReactComposerDispatcher').dispatch({composerID:i,type:c('ReactComposerWorkFileActionType').SET_FILE_CONFIG,config:j});};function h(){'use strict';}f.exports=new h();}),null);
__d('ReactComposerWorkFileAttachmentUpload.react',['cx','fbt','AppIntegrationType','ReactComposerWorkFileAttachmentAppUploadIframe.react','FileInput.react','immutable','InlineBlock.react','Layout.react','React','XUIButton.react','XUICloseButton.react','XUIText.react','XWorkSDKSbxOneDriveFilePickerController'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('immutable').Map,m=c('Layout.react').Column,n=c('React').PropTypes;j=babelHelpers.inherits(o,c('React').PureComponent);k=j&&j.prototype;o.prototype.render=function(){'use strict';if(!this.props.canViewerUploadFiles&&this.props.installedApps.size===0)return null;return c('React').createElement(c('Layout.react'),{className:"_1wu3"},this.getFileUploadArea(),this.getAppsUploadArea());};o.prototype.getFileUploadArea=function(){'use strict';if(!this.props.canViewerUploadFiles)return null;var p=this.props.hasFileSelected?c('React').createElement(c('XUICloseButton.react'),{onClick:this.props.onFileRemove,className:"_1wu6",size:'small',type:'button'}):null,q=this.props.installedApps.size>0?i._("From Your Computer"):i._("Select a file on your computer");return c('React').createElement(m,{className:"_1wu4"+(this.$ReactComposerWorkFileAttachmentUpload1()?' '+"_1wu5":'')},c('React').createElement('div',{className:"_1wu7"},c('React').createElement(c('XUIText.react'),{className:"_1wu8",weight:'bold',display:'block'},q),c('React').createElement(c('FileInput.react'),{onChange:this.props.onFileSelected,name:'file1'},c('React').createElement(c('XUIButton.react'),{disabled:this.$ReactComposerWorkFileAttachmentUpload1(),className:"_1wu9",label:i._("Choose File"),href:'#'})),c('React').createElement(c('InlineBlock.react'),{className:"_1wua _3-9a",alignv:'middle'},this.props.selectedFileName),p,c('React').createElement(c('XUIText.react'),{className:"_1wub",display:'block',size:'small'},i._("(Max size {size})",[i.param('size',this.props.maxFileUploadString)]))));};o.prototype.$ReactComposerWorkFileAttachmentUpload2=function(p){'use strict';var q=void 0;switch(p.type){case c('AppIntegrationType').ONEDRIVE_FILEPICKER:q=c('XWorkSDKSbxOneDriveFilePickerController').getURIBuilder().getURI();break;}if(!q)return null;q=q.setDomain('www.fbsbx.com').setSubdomain('work-sdk').setProtocol('https');return c('React').createElement('div',{key:p.type,className:"_3-94"},c('React').createElement(c('ReactComposerWorkFileAttachmentAppUploadIframe.react'),{url:q,onAppFilesSelected:this.props.onAppFilesSelected}));};o.prototype.$ReactComposerWorkFileAttachmentUpload1=function(){'use strict';return this.props.selectedAppsFiles.size>0;};o.prototype.$ReactComposerWorkFileAttachmentUpload3=function(){'use strict';var p=this.props.selectedAppsFiles.map(function(q,r){return this.$ReactComposerWorkFileAttachmentUpload4(r,q);}.bind(this)).toArray();return c('React').createElement('div',null,p);};o.prototype.$ReactComposerWorkFileAttachmentUpload4=function(p,q){'use strict';var r=c('React').createElement(c('XUICloseButton.react'),{onClick:function(){return this.props.onAppFileRemove(p);}.bind(this),className:"_1wu6",size:'small',type:'button'});return c('React').createElement('div',{key:p,className:"_3-94"},c('React').createElement(c('InlineBlock.react'),{className:"_1wua",alignv:'middle'},q),r);};o.prototype.getAppsUploadArea=function(){'use strict';if(this.props.installedApps.size===0)return null;var p=c('React').createElement('div',null,this.props.installedApps.map(function(q){return this.$ReactComposerWorkFileAttachmentUpload2(q);}.bind(this)).toArray());return c('React').createElement(m,{className:"_1wui"+(this.props.hasFileSelected?' '+"_1wu5":'')},c('React').createElement('div',{className:"_1wu7"},c('React').createElement(c('XUIText.react'),{weight:'bold',display:'block',className:"_1wu8"},i._("Share from:")),p));};function o(){'use strict';j.apply(this,arguments);}o.propTypes={canViewerUploadFiles:n.bool.isRequired,hasFileSelected:n.bool.isRequired,installedApps:n.object.isRequired,maxFileUploadString:n.string.isRequired,onAppFileRemove:n.func.isRequired,onAppFilesSelected:n.func.isRequired,onFileRemove:n.func.isRequired,onFileSelected:n.func.isRequired,selectedAppsFiles:n.object.isRequired,selectedFileName:n.string.isRequired};f.exports=o;}),null);
__d('ReactComposerWorkFileAttachmentUploadContainerImpl.react',['fbt','AppIntegrationType','ContentState','ReactComposerWorkFileAttachmentUpload.react','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerWorkFileActions','ReactComposerStatusActions','ReactComposerStatusStore','ReactComposerWorkFileStore','EditorState','ExceptionDialog','React'],(function a(b,c,d,e,f,g,h){var i=c('ReactComposerWorkFileActions').module,j=c('ReactComposerWorkFileStore').module,k=c('React').createClass({displayName:'ReactComposerWorkFileAttachmentUploadContainer',mixins:[c('ReactComposerPropsAndStoreBasedStateMixin')(j)],statics:{calculateState:function l(m,n){return {maxFileUploadSize:j.getMaxFileUploadSize(m),maxFileUploadString:j.getMaxFileUploadString(m),hasFileSelected:j.hasFile(m),selectedFileName:j.getSelectedFileName(m),installedApps:j.getInstalledApps(m),selectedAppsFiles:j.getSelectedAppsFiles(m),canViewerUploadFiles:j.getCanViewerUploadFiles(m)};}},render:function l(){return c('React').createElement(c('ReactComposerWorkFileAttachmentUpload.react'),{maxFileUploadString:this.state.maxFileUploadString,onFileRemove:this._onFileRemove,onFileSelected:this._onFilesSelected,hasFileSelected:this.state.hasFileSelected,selectedFileName:this.state.selectedFileName,installedApps:this.state.installedApps,canViewerUploadFiles:this.state.canViewerUploadFiles,selectedAppsFiles:this.state.selectedAppsFiles,onAppFilesSelected:this._onAppFilesSelected,onAppFileRemove:this._onAppFileRemove});},_onFilesSelected:function l(event){var m=event.target.files[0];if(m.size>this.state.maxFileUploadSize){c('ExceptionDialog').show(h._("File Too Large").toString(),h._("The file you uploaded is too large.").toString());return;}i.saveFile(this.context.composerID,{name:event.target.value.split('\\').pop(),file:m});event.target.value=null;},_onAppFilesSelected:function l(m){if(m.appType===c('AppIntegrationType').ONEDRIVE_FILEPICKER)m.files.forEach(function(n){return this._onOneDriveSelected(n);}.bind(this));},_onOneDriveSelected:function l(m){i.saveAppFile(this.context.composerID,m.id,m.name);this._updateEditorContent(m.permissions[0].link.webUrl);},_updateEditorContent:function l(m){var n=c('ReactComposerStatusStore').getEditorState(this.context.composerID);if(n){var o=n.getCurrentContent(),p=c('ContentState').createFromText(o.getPlainText()+(o.getPlainText()===''?'':'\n')+m),q=c('EditorState').push(n,p,'insert-characters');c('ReactComposerStatusActions').setEditorState(this.context.composerID,q);}},_onAppFileRemove:function l(m){i.removeAppFile(this.context.composerID,m);},_onFileRemove:function l(){i.reset(this.context.composerID);}});f.exports=k;}),null);