if (self.CavalryLogger) { CavalryLogger.start_js(["uIVmg"]); }

__d('CampfireCharacters',[],(function a(b,c,d,e,f,g){'use strict';var h={EMBED:'\ud83d\uddbc',PHOTO:'\ud83d\udcf7',VIDEO:'\ud83d\udcf9'};f.exports=h;}),null);
__d('CampfireCommands',[],(function a(b,c,d,e,f,g){var h={TOGGLE_LINK:'TOGGLE_LINK',SAVE_DRAFT:'SAVE_DRAFT'};f.exports=h;}),null);
__d('calculateMenuTop',['DOMVector','Style'],(function a(b,c,d,e,f,g){function h(i,j){var k=b.getSelection(),l=k.anchorNode,m=k.focusNode;if(l===null||m===null)return null;var n=i.getIsBackward()?m:l;while(n&&(!n.getAttribute||!n.getAttribute('data-block')))n=n.parentNode;if(!n)return null;var o=c('DOMVector').getElementPosition(n,'viewport').y,p=c('DOMVector').getElementPosition(j,'viewport').y,q=c('Style').getFloat(n,'paddingTop'),r=c('Style').getFloat(n,'lineHeight'),s=o+q+r/2;return Math.floor(s-p);}f.exports=h;}),null);
__d("XNotesUserEmbedsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/notes\/composer\/embeds\/",{original_src:{type:"String",required:true}});}),null);
__d('NotesEmbed.react',['cx','fbt','ActorURI','AsyncRequest','Keys','React','XNotesUserEmbedsController','XUIButton.react','XUIDialogBody.react','XUIDialogFooter.react','XUIDialogTitle.react','XUIText.react','XUITextInput.react'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;'use strict';for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={error:null,loading:false,src:''},this.$NotesEmbed1=function(){this.refs.src.focusInput();}.bind(this),this.$NotesEmbed2=function(){if(this.state.loading)return;if(this.state.src.trim()===''){this.setState({error:'Please enter a URL.'},this.$NotesEmbed1);return;}var s=function(){var t=c('XNotesUserEmbedsController').getURIBuilder().setString('original_src',this.state.src).getURI();t=c('ActorURI').create(t,this.props.ownerID);new (c('AsyncRequest'))(t).setHandler(function(u){var v=u.getPayload(),w=v.embedData;this.props.onEmbed(w);this.props.onClose();}.bind(this)).setErrorHandler(function(u){var v=u.errorDescription;this.setState({error:v,loading:false},this.$NotesEmbed1);}.bind(this)).send();}.bind(this);this.setState({loading:true},s);}.bind(this),this.$NotesEmbed3=function(s){this.setState({error:null,src:s.target.value});}.bind(this),this.$NotesEmbed4=function(s){switch(s.which){case c('Keys').RETURN:s.preventDefault();this.$NotesEmbed2();}}.bind(this),o;}m.prototype.componentDidMount=function(){'use strict';setTimeout(this.$NotesEmbed1,0);};m.prototype.render=function(){'use strict';var n=i._("Paste in the URL for the media you want to insert into your note...");return c('React').createElement('div',null,c('React').createElement(c('XUIDialogTitle.react'),null,i._("Embed photos, videos, and more")),c('React').createElement(c('XUIDialogBody.react'),null,c('React').createElement(c('XUITextInput.react'),{className:"_ipd",onChange:this.$NotesEmbed3,onKeyDown:this.$NotesEmbed4,placeholder:n,ref:'src',xuiError:this.state.error}),c('React').createElement(c('XUIText.react'),{className:"_ipe",display:'block'},i._("We currently support embedding from Facebook, Giphy, Instagram, SoundCloud, Twitter, Vimeo, Vine, and YouTube."))),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIButton.react'),{disabled:this.state.loading,label:i._("Insert"),onClick:this.$NotesEmbed2,use:'confirm'})));};m.propTypes={onClose:l.func.isRequired,onEmbed:l.func.isRequired,ownerID:l.string.isRequired};f.exports=m;}),null);
__d('NotesEmbedDialog',['DialogX','NotesEmbed.react','React','emptyFunction'],(function a(b,c,d,e,f,g){function h(i){'use strict';this.$NotesEmbedDialog2=i.onEmbed;this.$NotesEmbedDialog3=i.onEmbedCancel||c('emptyFunction');this.$NotesEmbedDialog4=i.ownerID;this.$NotesEmbedDialog1=new (c('DialogX'))({width:500},c('React').createElement(c('NotesEmbed.react'),{onClose:function(){return this.hide();}.bind(this),onEmbed:this.$NotesEmbedDialog2,ownerID:this.$NotesEmbedDialog4}));this.$NotesEmbedDialog1.subscribe('cancel',function(){return this.$NotesEmbedDialog3();}.bind(this));}h.prototype.hide=function(){'use strict';this.$NotesEmbedDialog1.hide();};h.prototype.show=function(){'use strict';this.$NotesEmbedDialog1.show();};f.exports=h;}),null);
__d("XNotesUserPhotosController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/notes\/composer\/photos\/",{thumb_height:{type:"Int",required:true},thumb_width:{type:"Int",required:true}});}),null);
__d('NotesPhotoPicker.react',['ix','cx','fbt','glyph','ActorURI','AsyncRequest','CssBackgroundImage.react','FileInput.react','Grid.react','Image.react','React','ScrollableArea.react','XNotesUserPhotosController','XUIButton.react','XUIDialogBody.react','XUIDialogFooter.react','XUIDialogTitle.react','XUISpinner.react','cssURL','getObjectValues'],(function a(b,c,d,e,f,g,h,i,j,k){var l,m,n=c('Grid.react').GridItem,o=c('React').PropTypes,p=338,q=116,r=149;l=babelHelpers.inherits(s,c('React').Component);m=l&&l.prototype;function s(){var t,u;'use strict';for(var v=arguments.length,w=Array(v),x=0;x<v;x++)w[x]=arguments[x];return u=(t=m.constructor).call.apply(t,[this].concat(w)),this.state={photoData:null},this.renderThumbnailGrid=function(){if(!this.state.photoData)return c('React').createElement('div',{className:"_5tki",style:{height:p+'px'}},c('React').createElement(c('XUISpinner.react'),{className:"_5tkj",size:'large'}));var y=c('getObjectValues')(this.state.photoData).map(function(z){var aa=function(){this.props.onPhotoPicked(z);this.props.onClose();}.bind(this);return c('React').createElement(n,{key:'thumbnail_'+z.originalPhotoData.id,onClick:aa},c('React').createElement('div',{className:"_5tkk"},c('React').createElement(c('CssBackgroundImage.react'),{imageURI:z.thumbnailSrc,className:"_5tkl",height:q+'px',width:r+'px'})));}.bind(this));return c('React').createElement(c('Grid.react'),{cols:4,spacing:"_2phz"},y);}.bind(this),this.onFileInputChange=function(event){this.props.onPhotoUpload(event.target);this.props.onClose();}.bind(this),u;}s.prototype.componentWillMount=function(){'use strict';var t=c('XNotesUserPhotosController').getURIBuilder().setInt('thumb_height',q).setInt('thumb_width',r).getURI();t=c('ActorURI').create(t,this.props.ownerID);new (c('AsyncRequest'))(t).setHandler(function(u){var v=u.payload.photoData;if(v)this.setState({photoData:v});}.bind(this)).send();};s.prototype.render=function(){'use strict';var t=j._("Add Photo To Note");if(this.props.isDoc)t=j._("Add Photo To Doc");return c('React').createElement('div',null,c('React').createElement(c('XUIDialogTitle.react'),null,t),c('React').createElement(c('XUIDialogBody.react'),{className:"_5tkf"},c('React').createElement(c('ScrollableArea.react'),{height:p,shadow:false},this.renderThumbnailGrid())),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('FileInput.react'),{name:'file',onChange:this.onFileInputChange,accept:'image/*'},c('React').createElement(c('XUIButton.react'),{image:c('React').createElement(c('Image.react'),{src:h("101456")}),href:{url:'#'},label:j._("Upload New Photo")})),c('React').createElement(c('XUIButton.react'),{className:"_5tkg layerCancel",label:j._("Close"),use:'confirm'})));};s.propTypes={onClose:o.func.isRequired,onPhotoPicked:o.func.isRequired,onPhotoUpload:o.func.isRequired,isDoc:o.bool};f.exports=s;}),null);
__d('NotesPhotoPickerDialog',['DialogX','NotesPhotoPicker.react','React','emptyFunction'],(function a(b,c,d,e,f,g){function h(i){'use strict';this.$NotesPhotoPickerDialog1=null;this.$NotesPhotoPickerDialog2=i.onPhotoPicked;this.$NotesPhotoPickerDialog3=i.onPhotoUpload;this.$NotesPhotoPickerDialog4=i.onPhotoCancel||c('emptyFunction');this.$NotesPhotoPickerDialog5=i.ownerID;this.$NotesPhotoPickerDialog6=i.isDoc;}h.prototype.hide=function(){'use strict';if(this.$NotesPhotoPickerDialog1)this.$NotesPhotoPickerDialog1.hide();};h.prototype.show=function(){'use strict';if(!this.$NotesPhotoPickerDialog1){this.$NotesPhotoPickerDialog1=new (c('DialogX'))({width:690},c('React').createElement(c('NotesPhotoPicker.react'),{onClose:function(){return this.hide();}.bind(this),onPhotoPicked:this.$NotesPhotoPickerDialog2,onPhotoUpload:this.$NotesPhotoPickerDialog3,ownerID:this.$NotesPhotoPickerDialog5,isDoc:this.$NotesPhotoPickerDialog6}));this.$NotesPhotoPickerDialog1.subscribe('cancel',function(){return this.$NotesPhotoPickerDialog4();}.bind(this));}this.$NotesPhotoPickerDialog1.show();};f.exports=h;}),null);
__d("XNotesUserVideosController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/notes\/composer\/videos\/",{is_from_cover:{type:"Bool",defaultValue:false}});}),null);
__d('NotesVideoPicker.react',['cx','fbt','ActorURI','AsyncRequest','Grid.react','ScrollableArea.react','React','XNotesUserVideosController','XUIDialogBody.react','XUIDialogTitle.react','XUISpinner.react','cssURL'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('Grid.react').GridItem,m=c('React').PropTypes,n=400;j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;function o(){var p,q;'use strict';for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.state={videoData:null},this.renderThumbnailGrid=function(){if(!this.state.videoData)return c('React').createElement('div',{className:"_29vm"},c('React').createElement(c('XUISpinner.react'),{className:"_29vo",size:'large'}));var u=Object.keys(this.state.videoData).map(function(v,w){var x=this.state.videoData[v],y=function(){this.props.onVideoPicked(x);this.props.onClose();}.bind(this);return c('React').createElement(l,{key:'thumbnail_'+x.id,onClick:y},c('React').createElement('div',{className:"_29vp"},c('React').createElement('div',{className:"_29vq",style:{backgroundImage:c('cssURL')(x.posterSrc)}})),c('React').createElement('div',{className:"_29vr"},x.title));}.bind(this));return c('React').createElement(c('Grid.react'),{cols:2,spacing:"_2phz"},u);}.bind(this),q;}o.prototype.componentWillMount=function(){'use strict';var p=c('XNotesUserVideosController').getURIBuilder().getURI();p=c('ActorURI').create(p,this.props.ownerID);new (c('AsyncRequest'))(p).setHandler(function(q){var r=q.getPayload().videoData;r&&this.setState({videoData:r});}.bind(this)).send();};o.prototype.render=function(){'use strict';return c('React').createElement('div',null,c('React').createElement(c('XUIDialogTitle.react'),null,i._("Add Video")),c('React').createElement(c('XUIDialogBody.react'),{className:"_29vl"},c('React').createElement(c('ScrollableArea.react'),{height:n,shadow:false},this.renderThumbnailGrid())));};o.propTypes={onClose:m.func.isRequired,onVideoPicked:m.func.isRequired};f.exports=o;}),null);
__d('NotesVideoPickerDialog',['DialogX','NotesVideoPicker.react','React','emptyFunction'],(function a(b,c,d,e,f,g){function h(i){'use strict';this.$NotesVideoPickerDialog1=null;this.$NotesVideoPickerDialog2=i.onVideoPicked;this.$NotesVideoPickerDialog3=i.onVideoCancel||c('emptyFunction');this.$NotesVideoPickerDialog4=i.ownerID;}h.prototype.hide=function(){'use strict';if(this.$NotesVideoPickerDialog1)this.$NotesVideoPickerDialog1.hide();};h.prototype.show=function(){'use strict';if(!this.$NotesVideoPickerDialog1){this.$NotesVideoPickerDialog1=new (c('DialogX'))({width:690},c('React').createElement(c('NotesVideoPicker.react'),{onClose:function(){return this.hide();}.bind(this),onVideoPicked:this.$NotesVideoPickerDialog2,ownerID:this.$NotesVideoPickerDialog4}));this.$NotesVideoPickerDialog1.subscribe('cancel',function(){return this.$NotesVideoPickerDialog3();}.bind(this));}this.$NotesVideoPickerDialog1.show();};f.exports=h;}),null);
__d('ReactComposerMarkdownPreviewActionType',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){f.exports=c('keyMirrorRecursive')({SET_PREVIEW:null,UPDATE_PREVIEW:null},'ReactComposerMarkdownPreviewActionType');}),null);
__d("XReactComposerMarkdownPreviewController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/react_composer\/status\/markdown_preview\/",{});}),null);
__d('ReactComposerMarkdownPreviewStore',['AsyncRequest','ReactComposerMarkdownPreviewActionType','ReactComposerStoreBase','getMentionsTextForContentState','XReactComposerMarkdownPreviewController'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('ReactComposerStoreBase'));i=h&&h.prototype;function j(){'use strict';var k;i.constructor.call(this,function(){return {renderedContent:null};},function(l){switch(l.type){case c('ReactComposerMarkdownPreviewActionType').UPDATE_PREVIEW:k&&k.$ReactComposerMarkdownPreviewStore1(l);break;case c('ReactComposerMarkdownPreviewActionType').SET_PREVIEW:k&&k.$ReactComposerMarkdownPreviewStore2(l);break;}});k=this;}j.prototype.getRenderedContent=function(k){'use strict';return this.getComposerData(k).renderedContent;};j.prototype.$ReactComposerMarkdownPreviewStore1=function(k){'use strict';var l=this.validateAction(k,['composerID','contentState','targetID']),m=l[0],n=l[1],o=l[2],p=this.getComposerData(m),q=c('getMentionsTextForContentState')(n),r=c('XReactComposerMarkdownPreviewController').getURIBuilder().getURI();new (c('AsyncRequest'))(r).setData({xc_message:q,composer_id:m,target_id:o}).send();this.emitChange(m);};j.prototype.$ReactComposerMarkdownPreviewStore2=function(k){'use strict';var l=this.validateAction(k,['composerID','renderedContent']),m=l[0],n=l[1],o=this.getComposerData(m);o.renderedContent=n;this.emitChange(m);};f.exports=new j();}),null);
__d('ReactComposerMarkdownPreviewActions',['ReactComposerMarkdownPreviewActionType','ReactComposerDispatcher','throttle','ReactComposerMarkdownPreviewStore'],(function a(b,c,d,e,f,g){c('ReactComposerMarkdownPreviewStore');var h=700;function i(){'use strict';this.updatePreview=c('throttle')(this.$ReactComposerMarkdownPreviewActions1,h,this);}i.prototype.$ReactComposerMarkdownPreviewActions1=function(j,k,l){'use strict';c('ReactComposerDispatcher').dispatch({composerID:j,contentState:l,targetID:k,type:c('ReactComposerMarkdownPreviewActionType').UPDATE_PREVIEW});};i.prototype.setPreview=function(j,k){'use strict';c('ReactComposerDispatcher').dispatch({composerID:j,renderedContent:k,type:c('ReactComposerMarkdownPreviewActionType').SET_PREVIEW});};f.exports=new i();}),null);
__d('ReactComposerMarkdownPreviewSyntaxHelpDialog.react',['cx','fbt','CurrentUser','React','XUIDialog.react','XUIDialogBody.react','XUIDialogTitle.react','XUIGrayText.react','XUIText.react'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.componentDidUpdate=function(){'use strict';this.props.prettify.init();};m.prototype.render=function(){'use strict';if(!this.props.show)return null;return c('React').createElement(c('XUIDialog.react'),{layerHideOnBlur:true,shown:true,onToggle:this.props.onToggle,width:450},c('React').createElement(c('XUIDialogTitle.react'),null,c('React').createElement(c('XUIText.react'),null,i._("Text Formatting Help"))),this.$ReactComposerMarkdownPreviewSyntaxHelpDialog1());};m.prototype.$ReactComposerMarkdownPreviewSyntaxHelpDialog1=function(){'use strict';return c('React').createElement(c('XUIDialogBody.react'),{className:(c('CurrentUser').isEmployee()?"_2pi2":'')+(!c('CurrentUser').isEmployee()?' '+"_2pi3":'')+(' '+"_3w8y")},c('React').createElement('table',{className:"_11_e"},c('React').createElement('thead',null,c('React').createElement('tr',null,c('React').createElement('td',null,i._("Result")),c('React').createElement('td',null,i._("Formatting")))),c('React').createElement('tbody',null,c('React').createElement('tr',null,c('React').createElement('td',null,c('React').createElement('strong',null,i._("Bold"))),c('React').createElement('td',null,'**',i._("text"),'**')),c('React').createElement('tr',null,c('React').createElement('td',null,c('React').createElement('em',null,i._("Emphasize"))),c('React').createElement('td',null,'*',i._("text"),'*')),c('React').createElement('tr',null,c('React').createElement('td',null,c('React').createElement('p',null,c('React').createElement('a',{href:'https://facebook.com',target:'_blank'},i._("Link")))),c('React').createElement('td',null,'[',i._("title"),'](https://facebook.com)')),c('React').createElement('tr',null,c('React').createElement('td',null,c('React').createElement('code',null,i._("Inline code"))),c('React').createElement('td',null,'`',i._("code"),'`')),c('React').createElement('tr',null,c('React').createElement('td',null,c('React').createElement('pre',{className:'prettyprint'},c('React').createElement('code',null,'console.log("Code block!");'))),c('React').createElement('td',null,'```',c('React').createElement('br',null),'// ',' ',i._("your code here"),';',c('React').createElement('br',null),'```')),c('React').createElement('tr',null,c('React').createElement('td',null,i._("List")),c('React').createElement('td',null,'-',' ',i._("item"))),c('React').createElement('tr',null,c('React').createElement('td',null,i._("Numbered List")),c('React').createElement('td',null,'1.',' ',i._("first item"))),c('React').createElement('tr',null,c('React').createElement('td',null,i._("Quote")),c('React').createElement('td',null,'>',' ',i._("quote"))),c('React').createElement('tr',null,c('React').createElement('td',null,'H1'),c('React').createElement('td',null,'#',' ',i._("Heading"))),c('React').createElement('tr',null,c('React').createElement('td',null,'H2'),c('React').createElement('td',null,'##',' ',i._("Heading"))),c('CurrentUser').isEmployee()?[c('React').createElement('tr',{key:'tasks'},c('React').createElement('td',null,'Tasks'),c('React').createElement('td',null,'T123456 or #123456')),c('React').createElement('tr',{key:'diffs'},c('React').createElement('td',null,'Diffs'),c('React').createElement('td',null,'D123456')),c('React').createElement('tr',{key:'paste'},c('React').createElement('td',null,'Paste'),c('React').createElement('td',null,'P123456')),c('React').createElement('tr',{key:'sev'},c('React').createElement('td',null,'SEV'),c('React').createElement('td',null,'S123456')),c('React').createElement('tr',{key:'Bunny'},c('React').createElement('td',null,'Bunny'),c('React').createElement('td',null,'$onavo snapchat$'))]:null)),c('CurrentUser').isEmployee()?c('React').createElement('div',{className:"_2pi3 _11_f"},c('React').createElement(c('XUIGrayText.react'),{shade:'light',size:'small'},i._("For further Markdown reference see {Link to markdown dex}.",[i.param('Link to markdown dex',c('React').createElement('a',{href:'http://fburl.com/markdown',target:'_blank'},'Markdown Dex'))]))):null);};function m(){'use strict';j.apply(this,arguments);}m.propTypes={show:l.bool.isRequired,onToggle:l.func.isRequired,prettify:l.object.isRequired};f.exports=m;}),null);
__d('ReactComposerMarkdownPreview.react',['cx','fbt','ReactComposerContextMixin','ReactComposerMarkdownPreviewActions','ReactComposerStatusStore','DOMContainer.react','ReactComponentWithPureRenderMixin','React','ReactComposerMarkdownPreviewSyntaxHelpDialog.react'],(function a(b,c,d,e,f,g,h,i){var j=c('React').PropTypes,k=c('React').createClass({displayName:'ReactComposerMarkdownPreview',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerContextMixin')],getInitialState:function l(){return {showSyntaxHelpDialog:false};},propTypes:{prettify:j.object.isRequired,shouldShow:j.bool.isRequired,renderedContent:j.object},componentDidUpdate:function l(){this.props.prettify.init();},componentWillReceiveProps:function l(m){if(!this.props.shouldShow&&m.shouldShow){var n=c('ReactComposerStatusStore').getEditorState(this.context.composerID);c('ReactComposerMarkdownPreviewActions').updatePreview(this.context.composerID,this.context.targetID,n&&n.getCurrentContent());}},render:function l(){if(!this.props.shouldShow)return null;return c('React').createElement('div',{className:"_371c"},c('React').createElement(c('ReactComposerMarkdownPreviewSyntaxHelpDialog.react'),{show:this.state.showSyntaxHelpDialog,onToggle:this._onDialogToggle,prettify:this.props.prettify}),c('React').createElement('span',{className:"_371d"},i._("Here's what your post will look like -"),' '),c('React').createElement('a',{onClick:this._onHintClick,role:'button',tabIndex:'0'},i._("Formatting help")),c('React').createElement('br',null),this.props.renderedContent?c('React').createElement(c('DOMContainer.react'),{className:"_3-8y",display:'block'},this.props.renderedContent):null);},_onHintClick:function l(){this.setState({showSyntaxHelpDialog:true});},_onDialogToggle:function l(){this.setState({showSyntaxHelpDialog:false});}});f.exports=k;}),null);
__d('ReactComposerMarkdownPreviewContainer.react',['ReactComposerContextMixin','ReactComposerTaggerStore','ReactComposerTaggerType','ReactComposerMarkdownPreviewStore','ReactComposerPropsAndStoreBasedStateMixin','ReactComponentWithPureRenderMixin','React','ReactComposerMarkdownPreview.react'],(function a(b,c,d,e,f,g){var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerMarkdownPreviewContainer',mixins:[c('ReactComposerContextMixin'),c('ReactComponentWithPureRenderMixin'),c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerMarkdownPreviewStore'),c('ReactComposerTaggerStore'))],propTypes:{prettify:h.object.isRequired},statics:{calculateState:function j(k,l){var m=!!c('ReactComposerTaggerStore').getTaggerData(k,c('ReactComposerTaggerType').MARKDOWN).isMarkdown;return {shouldShow:m,renderedContent:c('ReactComposerMarkdownPreviewStore').getRenderedContent(k)};}},render:function j(){return c('React').createElement(c('ReactComposerMarkdownPreview.react'),{prettify:this.props.prettify,shouldShow:this.state.shouldShow,renderedContent:this.state.renderedContent});}});f.exports=i;}),null);
__d('AtomicBlockUtils',['BlockMapBuilder','CharacterMetadata','ContentBlock','DraftModifier','EditorState','SelectionState','immutable','generateRandomKey','moveBlockInContentState'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').List,i=c('immutable').Repeat,j={insertAtomicBlock:function k(l,m,n){var o=l.getCurrentContent(),p=l.getSelection(),q=c('DraftModifier').removeRange(o,p,'backward'),r=q.getSelectionAfter(),s=c('DraftModifier').splitBlock(q,r),t=s.getSelectionAfter(),u=c('DraftModifier').setBlockType(s,t,'atomic'),v=c('CharacterMetadata').create({entity:m}),w=[new (c('ContentBlock'))({key:c('generateRandomKey')(),type:'atomic',text:n,characterList:h(i(v,n.length))}),new (c('ContentBlock'))({key:c('generateRandomKey')(),type:'unstyled',text:'',characterList:h()})],x=c('BlockMapBuilder').createFromArray(w),y=c('DraftModifier').replaceWithFragment(u,t,x),z=y.merge({selectionBefore:p,selectionAfter:y.getSelectionAfter().set('hasFocus',true)});return c('EditorState').push(l,z,'insert-fragment');},moveAtomicBlock:function k(l,m,n,o){var p=l.getCurrentContent(),q=l.getSelection(),r=void 0;if(o==='before'||o==='after'){var s=p.getBlockForKey(o==='before'?n.getStartKey():n.getEndKey());r=c('moveBlockInContentState')(p,m,s,o);}else{var t=c('DraftModifier').removeRange(p,n,'backward'),u=t.getSelectionAfter(),v=t.getBlockForKey(u.getFocusKey());if(u.getStartOffset()===0){r=c('moveBlockInContentState')(t,m,v,'before');}else if(u.getEndOffset()===v.getLength()){r=c('moveBlockInContentState')(t,m,v,'after');}else{var w=c('DraftModifier').splitBlock(t,u),x=w.getSelectionAfter(),y=w.getBlockForKey(x.getFocusKey());r=c('moveBlockInContentState')(w,m,y,'before');}}var z=r.merge({selectionBefore:q,selectionAfter:r.getSelectionAfter().set('hasFocus',true)});return c('EditorState').push(l,z,'move-block');}};f.exports=j;}),null);
__d('RichComposedTextEditorBlock.react',['DraftEditorBlock.react','React'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.render=function(){'use strict';return c('React').createElement(c('DraftEditorBlock.react'),babelHelpers['extends']({contentEditable:'inherit'},this.props.blockProps,this.props),this.props.children);};function j(){'use strict';h.apply(this,arguments);}f.exports=j;}),null);
__d('RichComposedTextEditorInlineStyleMenu.react',['cx','fbt','invariant','ComposedLinkEntityProperties','ContextualLayerAutoFlip','EditorState','immutable','Keys','LeftRight.react','React','ReactDOM','ReactFragment','Rect','SelectionState','TooltipData','URI','UserAgent','XUICloseButton.react','XUIContextualDialog.react','getVisibleSelectionRect'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=c('immutable').OrderedSet,l=c('React').PropTypes,m={ContextualLayerAutoFlip:c('ContextualLayerAutoFlip')},n={bold:i._("Bold"),italic:i._("Italic"),link:i._("Link"),mono:i._("Code"),linkPlaceholder:i._("Paste or type a link...")},o=c('React').createClass({displayName:'RichComposedTextEditorInlineStyleMenu',propTypes:{editorState:l.instanceOf(c('EditorState')).isRequired,onRemoveLink:l.func.isRequired,onAddLink:l.func.isRequired,onCancelLink:l.func.isRequired,onToggle:l.func.isRequired},getInitialState:function r(){return {addingLink:false,flyoutState:'style',bounds:null,targetSelection:null,linkText:''};},componentDidUpdate:function r(){if(this.state.addingLink)setTimeout(function(){return this.refs.linkInput.focus();}.bind(this),0);},_toggleBold:function r(s){s.preventDefault();this.props.onToggle('BOLD');},_toggleItalic:function r(s){s.preventDefault();this.props.onToggle('ITALIC');},_toggleMono:function r(s){s.preventDefault();this.props.onToggle('CODE');},_toggleLink:function r(s){s.preventDefault();this._toggleLinkImpl();},_toggleLinkImpl:function r(){if(this._alreadyContainsLink()){this.props.onRemoveLink();return;}this.setState({addingLink:true,flyoutState:'link',bounds:p(),targetSelection:this.props.editorState.getSelection(),linkText:''});},toggleLink:function r(){if(!this._canAddLink())return false;this._toggleLinkImpl();return true;},_onLinkValueChange:function r(s){var t=s.target;t instanceof HTMLInputElement||j(0);this.setState({linkText:t.value});},_onLinkValueKeydown:function r(s){switch(s.which){case c('Keys').RETURN:s.preventDefault();if(this.state.linkText){var t=new (c('URI'))(this.state.linkText);if(!c('URI').isValidURI(t))return;var u=t.getProtocol();if(!u){t.setProtocol('http');}else if(u!=='http'&&u!=='https')return;var v=this.props.editorState.getCurrentContent(),w=v.createEntity('LINK','MUTABLE',q(t)),x=w.getLastCreatedEntityKey();this.props.onAddLink(this.state.targetSelection,x);this.setState(this.getInitialState());}return;case c('Keys').ESC:s.preventDefault();this._cancelLink();}},reset:function r(s){this.setState(this.getInitialState(),s);},resetToStyles:function r(s){this.setState(Object.assign(this.getInitialState(),{targetSelection:this.props.editorState.getSelection(),bounds:this.state.bounds}),s);},_cancelLink:function r(){var s=this.state.targetSelection;this.props.onCancelLink(s);setTimeout(function(){return this.resetToStyles();}.bind(this),0);},_renderBold:function r(s){var t="_4q5h"+(s.has('BOLD')?' '+"_u4r":'');return c('React').createElement('li',babelHelpers['extends']({className:t,onMouseDown:this._toggleBold},c('TooltipData').propsFor(n.bold)));},_renderItalic:function r(s){var t="_4q5j"+(s.has('ITALIC')?' '+"_u4r":'');return c('React').createElement('li',babelHelpers['extends']({className:t,onMouseDown:this._toggleItalic},c('TooltipData').propsFor(n.italic)));},_renderMono:function r(s){var t="_4q5k"+(s.has('CODE')?' '+"_u4r":'');return c('React').createElement('li',babelHelpers['extends']({className:t,onMouseDown:this._toggleMono},c('TooltipData').propsFor(n.mono)));},_canAddLink:function r(){var s=this.props.editorState,t=this._getSelectionWithoutTrailingNewline(s);return !t.isCollapsed()&&t.getAnchorKey()===t.getFocusKey();},_alreadyContainsLink:function r(){var s=this.props.editorState,t=this._getSelectionWithoutTrailingNewline(s);return s.getCurrentContent().getBlockForKey(t.getAnchorKey()).getCharacterList().slice(t.getStartOffset(),t.getEndOffset()).some(function(u){var v=u.getEntity(),w=s.getCurrentContent();return v&&w.getEntity(v).getType()==='LINK';});},_getSelectionWithoutTrailingNewline:function r(s){var t=s.getSelection();if(!t.isCollapsed()&&t.getEndOffset()===0){var u=s.getCurrentContent(),v=u.getKeyBefore(t.getEndKey());if(v){var w=u.getBlockForKey(v).getLength(),x=t.getIsBackward();if(x){return new (c('SelectionState'))({anchorKey:v,anchorOffset:w,focusKey:t.getFocusKey(),focusOffset:t.getFocusOffset(),isBackward:true});}else return new (c('SelectionState'))({anchorKey:t.getAnchorKey(),anchorOffset:t.getAnchorOffset(),focusKey:v,focusOffset:w,isBackward:false});}}return t;},_renderLink:function r(){if(!this._canAddLink())return null;var s=this._alreadyContainsLink(),t="_4q5l"+(s?' '+"_u4r":'');return c('React').createElement('li',babelHelpers['extends']({className:t,onMouseDown:this._toggleLink},c('TooltipData').propsFor(n.link)));},_renderStyleBody:function r(s){return c('React').createElement('ul',{className:"_u4s clearfix"},this._renderBold(s),this._renderItalic(s),this._renderMono(s),this._renderLink());},_renderLinkBody:function r(){return c('React').createElement(c('LeftRight.react'),{className:"_u4u"},c('React').createElement('input',{className:"_u4v",type:'text',ref:'linkInput',placeholder:n.linkPlaceholder,value:this.state.linkText,onChange:this._onLinkValueChange,onKeyDown:this._onLinkValueKeydown}),c('React').createElement(c('XUICloseButton.react'),{className:"_u4w",size:'medium',shade:'dark',onClick:this._cancelLink}));},renderLayers:function r(){var s=false,t=false,u=null;if(this.state.flyoutState==='link'){s=true;u=this.state.bounds;}else{var v=this.props.editorState,w=!v.getSelection().isCollapsed();u=w?p():null;t=!!(w&&u);}var x=t?v.getCurrentInlineStyle():k();return c('ReactFragment').create({style:c('React').createElement(c('XUIContextualDialog.react'),{autoFocus:false,shown:t,alignment:'center',contextBounds:u,behaviors:m,contextRef:function(){return this.refs.inlineStyle;}.bind(this)},this._renderStyleBody(x)),link:c('React').createElement(c('XUIContextualDialog.react'),{hideOnEscape:false,autoFocus:false,shown:s,alignment:'center',contextBounds:u,behaviors:m,contextRef:function(){return this.refs.inlineStyle;}.bind(this)},this._renderLinkBody())});},render:function r(){return c('React').createElement('span',null,c('React').createElement('div',{ref:'inlineStyle'}),this.renderLayers());}});function p(){var r=c('getVisibleSelectionRect')(b);if(r==null)return null;var s=r.top,t=r.right,u=r.bottom,v=r.left;return new (c('Rect'))(s,t,u,v,'viewport').convertTo('document');}function q(r){var s={};s[c('ComposedLinkEntityProperties').URL]=r.toString();return s;}f.exports=o;}),null);
__d('RichComposedTextEditorMenu.react',['cx','fbt','ContextualLayerAutoFlip','EditorState','NotesEmbedDialog','NotesPhotoPickerDialog','NotesVideoPickerDialog','React','ReactDOM','ReactFragment','XUIContextualDialog.react','XUIContextualDialogBody.react','calculateMenuTop','clearImmediate','keyMirror','setImmediate'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=c('keyMirror')({STYLE:null,ATTACH:null}),n={ContextualLayerAutoFlip:c('ContextualLayerAutoFlip')},o={embed:i._("Embed"),photo:i._("Photo"),video:i._("Video")};j=babelHelpers.inherits(p,c('React').Component);k=j&&j.prototype;function p(){var t,u;for(var v=arguments.length,w=Array(v),x=0;x<v;x++)w[x]=arguments[x];return u=(t=k.constructor).call.apply(t,[this].concat(w)),this.state={top:null,visibleMenu:null},this.$RichComposedTextEditorMenu1=function(){if(this.$RichComposedTextEditorMenu2)c('clearImmediate')(this.$RichComposedTextEditorMenu2);this.$RichComposedTextEditorMenu2=null;}.bind(this),this.$RichComposedTextEditorMenu3=function(){var y=this.props.editorState.getCurrentContent(),z=this.props.editorState.getSelection(),aa=c('calculateMenuTop')(z,c('ReactDOM').findDOMNode(this.refs.container));if(this.state.top!==aa)this.setState({top:aa,visibleMenu:null});}.bind(this),this.$RichComposedTextEditorMenu4=function(y){y.preventDefault();if(this.state.visibleMenu===m.ATTACH){this.setState({visibleMenu:null});}else this.setState({visibleMenu:m.ATTACH});}.bind(this),this.$RichComposedTextEditorMenu5=function(y){y.preventDefault();if(this.state.visibleMenu===m.STYLE){this.setState({visibleMenu:null});}else this.setState({visibleMenu:m.STYLE});}.bind(this),this.$RichComposedTextEditorMenu6=function(){var y=this.props.editorState,z=y.getSelection();return y.getCurrentContent().getBlockForKey(z.getStartKey()).getType();}.bind(this),this.$RichComposedTextEditorMenu7=function(y){y.preventDefault();},this.$RichComposedTextEditorMenu10=function(){var y=this.props.editorState,z=y.getSelection(),aa=this.$RichComposedTextEditorMenu6();return this.state.top!==null&&aa!=='atomic'&&z.getHasFocus();}.bind(this),this.$RichComposedTextEditorMenu11=function(y){y.preventDefault();this.props.onToggleBlockType('header-one');}.bind(this),this.$RichComposedTextEditorMenu12=function(y){y.preventDefault();this.props.onToggleBlockType('header-two');}.bind(this),this.$RichComposedTextEditorMenu13=function(y){y.preventDefault();this.props.onToggleBlockType('unordered-list-item');}.bind(this),this.$RichComposedTextEditorMenu14=function(y){y.preventDefault();this.props.onToggleBlockType('ordered-list-item');}.bind(this),this.$RichComposedTextEditorMenu15=function(y){y.preventDefault();this.props.onToggleBlockType('blockquote');}.bind(this),this.$RichComposedTextEditorMenu16=function(y){y.preventDefault();this.props.onToggleBlockType('code-block');}.bind(this),this.$RichComposedTextEditorMenu17=function(y){y.preventDefault();setTimeout(function(){var z=function(aa){this.props.onAddEmbed(q(aa,this.props.editorState.getCurrentContent()));}.bind(this);new (c('NotesEmbedDialog'))({onEmbed:z,ownerID:this.props.ownerID}).show();}.bind(this),200);}.bind(this),this.$RichComposedTextEditorMenu9=function(y){y.preventDefault();setTimeout(function(){var z=this.props.compositionID,aa=this.props.editorState.getCurrentContent(),ba=function(ea){this.props.onAddPhoto(r(Object.assign(ea,{compositionID:z}),aa));}.bind(this),ca=function(ea){this.props.onAddPhoto(r({compositionID:z,fileInput:ea},aa));}.bind(this),da=function(){this.props.onCancelPhoto();}.bind(this);new (c('NotesPhotoPickerDialog'))({onPhotoPicked:ba,onPhotoUpload:ca,onPhotoCancel:da,ownerID:this.props.ownerID}).show();}.bind(this),200);}.bind(this),this.$RichComposedTextEditorMenu18=function(y){y.preventDefault();setTimeout(function(){var z=this.props.compositionID,aa=function(ba){this.props.onAddVideo(s(Object.assign(ba,{compositionID:z},this.props.editorState.getCurrentContent())));}.bind(this);new (c('NotesVideoPickerDialog'))({onVideoPicked:aa,ownerID:this.props.ownerID}).show();}.bind(this),200);}.bind(this),u;}p.prototype.componentDidMount=function(){this.$RichComposedTextEditorMenu1();this.$RichComposedTextEditorMenu2=c('setImmediate')(function(){return this.$RichComposedTextEditorMenu3();}.bind(this));};p.prototype.componentDidUpdate=function(){this.$RichComposedTextEditorMenu1();this.$RichComposedTextEditorMenu2=c('setImmediate')(function(){return this.$RichComposedTextEditorMenu3();}.bind(this));};p.prototype.componentWillUnmount=function(){this.$RichComposedTextEditorMenu1();};p.prototype.$RichComposedTextEditorMenu8=function(){var t=this.$RichComposedTextEditorMenu6(),u={top:this.state.top+'px'},v=void 0;if(this.props.canAttachVideo||this.props.canAttachEmbed){v=c('React').createElement('li',{className:"_15_2",ref:'attach'});}else if(this.props.canAttachPhoto){v=c('React').createElement('li',{className:"_15_4",onClick:this.$RichComposedTextEditorMenu9});}else v=null;var w="_15_5"+(t==='unstyled'?' '+"_15_6":'')+(t==='header-one'?' '+"_15_7":'')+(t==='header-two'?' '+"_15_8":'')+(t==='unordered-list-item'?' '+"_15_9":'')+(t==='ordered-list-item'?' '+"_15_a":'')+(t==='blockquote'?' '+"_15_b":'')+(t==='code-block'?' '+"_15_c":'');return c('React').createElement('ul',{style:u,className:"clearfix _15_d",onMouseDown:this.$RichComposedTextEditorMenu7},v,c('React').createElement('li',{className:w,ref:'style'}));};p.prototype.$RichComposedTextEditorMenu19=function(t){var u="_15_7"+(t==='header-one'?' '+"_15_e":'');return c('React').createElement('li',{className:u,onMouseDown:this.$RichComposedTextEditorMenu11});};p.prototype.$RichComposedTextEditorMenu20=function(t){var u="_15_8"+(t==='header-two'?' '+"_15_e":'');return c('React').createElement('li',{className:u,onMouseDown:this.$RichComposedTextEditorMenu12});};p.prototype.$RichComposedTextEditorMenu21=function(t){var u="_15_9"+(t==='unordered-list-item'?' '+"_15_e":'');return c('React').createElement('li',{className:u,onMouseDown:this.$RichComposedTextEditorMenu13});};p.prototype.$RichComposedTextEditorMenu22=function(t){var u="_15_a"+(t==='ordered-list-item'?' '+"_15_e":'');return c('React').createElement('li',{className:u,onMouseDown:this.$RichComposedTextEditorMenu14});};p.prototype.$RichComposedTextEditorMenu23=function(t){var u="_15_b"+(t==='blockquote'?' '+"_15_e":'');return c('React').createElement('li',{className:u,onMouseDown:this.$RichComposedTextEditorMenu15});};p.prototype.$RichComposedTextEditorMenu24=function(t){var u="_15_c"+(t==='code-block'?' '+"_15_e":'');return c('React').createElement('li',{className:u,onMouseDown:this.$RichComposedTextEditorMenu16});};p.prototype.$RichComposedTextEditorMenu25=function(){if(!this.props.canAttachEmbed)return null;return c('React').createElement('li',{className:"_15_o",onMouseDown:this.$RichComposedTextEditorMenu17},o.embed);};p.prototype.$RichComposedTextEditorMenu26=function(){var t="_15_r";return c('React').createElement('li',{className:t,onMouseDown:this.$RichComposedTextEditorMenu9},o.photo);};p.prototype.$RichComposedTextEditorMenu27=function(){if(!this.props.canAttachVideo)return null;var t="_15_s";return c('React').createElement('li',{className:t,onMouseDown:this.$RichComposedTextEditorMenu18},o.video);};p.prototype.renderLayers=function(){var t=this.$RichComposedTextEditorMenu10(),u=this.$RichComposedTextEditorMenu6();return c('ReactFragment').create({attach:c('React').createElement(c('XUIContextualDialog.react'),{autoFocus:false,contextRef:function(){return this.refs.attach;}.bind(this),hoverContextRef:function(){return this.refs.attach;}.bind(this),hoverHideDelay:0,alignment:'center',offsetY:-2,behaviors:n,shown:t&&this.state.visibleMenu===m.ATTACH},c('React').createElement(c('XUIContextualDialogBody.react'),null,c('React').createElement('ul',{className:"_15_t clearfix"},this.$RichComposedTextEditorMenu26(),this.$RichComposedTextEditorMenu27(),this.$RichComposedTextEditorMenu25()))),style:c('React').createElement(c('XUIContextualDialog.react'),{autoFocus:false,contextRef:function(){return this.refs.style;}.bind(this),hoverContextRef:function(){return this.refs.style;}.bind(this),hoverHideDelay:40,alignment:'center',behaviors:n,shown:t&&this.state.visibleMenu===m.STYLE},c('React').createElement(c('XUIContextualDialogBody.react'),null,c('React').createElement('ul',{className:"_15_u clearfix"},this.$RichComposedTextEditorMenu19(u),this.$RichComposedTextEditorMenu20(u),this.$RichComposedTextEditorMenu21(u),this.$RichComposedTextEditorMenu22(u),this.$RichComposedTextEditorMenu23(u),this.$RichComposedTextEditorMenu24(u))))});};p.prototype.render=function(){var t="_15_v"+(this.$RichComposedTextEditorMenu10()?' '+"_15_w":'');return c('React').createElement('span',null,c('React').createElement('div',{className:t,ref:'container'},c('React').createElement('div',{className:"_40eu"},this.$RichComposedTextEditorMenu8())),this.renderLayers());};p.propTypes={editorState:l.instanceOf(c('EditorState')).isRequired,compositionID:l.string.isRequired,onToggleBlockType:l.func.isRequired,onAddPhoto:l.func.isRequired,onAddVideo:l.func.isRequired,onCancelPhoto:l.func.isRequired,ownerID:l.string.isRequired};function q(t,u){var v=u.createEntity('EMBED','IMMUTABLE',t);return v.getLastCreatedEntityKey();}function r(t,u){var v=u.createEntity('IMAGE','IMMUTABLE',t);return v.getLastCreatedEntityKey();}function s(t,u){var v=u.createEntity('VIDEO','IMMUTABLE',t);return v.getLastCreatedEntityKey();}f.exports=p;}),null);
__d('RichComposedTextEditor.react',['cssVar','cx','AbstractMentionsTextEditor.react','AtomicBlockUtils','CampfireCharacters','CampfireCommands','RichComposedTextEditorBlock.react','RichComposedTextEditorInlineStyleMenu.react','RichComposedTextEditorMenu.react','DraftModifier','EditorState','MentionsLayer.react','React','RichTextEditorUtil','RichTextEditorMarkdownUtil','XUITypeaheadView.react','createMentionEntity','isSoftNewlineEvent','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=c('CampfireCharacters').EMBED,n=c('CampfireCharacters').PHOTO,o=c('CampfireCharacters').VIDEO,p=4,q={CODE:{backgroundColor:"#f6f7f9",fontFamily:"Menlo, Consolas, Monaco, monospace",fontSize:'14px',padding:4}};j=babelHelpers.inherits(r,c('React').Component);k=j&&j.prototype;function r(){var w,x;for(var y=arguments.length,z=Array(y),aa=0;aa<y;aa++)z[aa]=arguments[aa];return x=(w=k.constructor).call.apply(w,[this].concat(z)),this.$RichComposedTextEditor1=function(ba){this.props.onChange(c('RichTextEditorUtil').onTab(ba,this.props.editorState,p));}.bind(this),this.$RichComposedTextEditor2=function(ba,ca){if(this.props.handleContentReturn&&this.props.handleContentReturn(ba,ca))return true;if(c('isSoftNewlineEvent')(ba)){this.props.onChange(c('RichTextEditorUtil').insertSoftNewline(ca));return true;}var da=c('RichTextEditorUtil').tryToRemoveBlockStyle(ca);if(da){this.props.onChange(c('EditorState').push(ca,da,'change-block-type'));return true;}var ea=s(ca);if(ea){this.props.onChange(c('EditorState').push(ca,ea,'change-block-type'));return true;}return false;}.bind(this),this.$RichComposedTextEditor3=function(ba,ca){if(ba===c('CampfireCommands').SAVE_DRAFT){this.props.onSave();return true;}else if(ba===c('CampfireCommands').TOGGLE_LINK){var da=this.refs.inlineStyleMenu;return da.toggleLink();}else{var ea=c('RichTextEditorMarkdownUtil').blockStyleToText(ba,ca);if(ea){this.props.onChange(ea);return true;}}var fa=c('RichTextEditorUtil').handleKeyCommand(ca,ba);if(fa){this.props.onChange(fa);return true;}return false;}.bind(this),this.$RichComposedTextEditor4=function(ba){this.props.onChange(c('RichTextEditorMarkdownUtil').textToBlockStyle(ba)||ba);}.bind(this),this.$RichComposedTextEditor5=function(ba){this.props.onChange(c('RichTextEditorUtil').toggleBlockType(this.props.editorState,ba));}.bind(this),this.$RichComposedTextEditor6=function(ba){this.props.onChange(c('RichTextEditorUtil').toggleInlineStyle(this.props.editorState,ba));}.bind(this),this.$RichComposedTextEditor7=function(){var ba=this.props.editorState;this.props.onChange(c('RichTextEditorUtil').toggleLink(ba,ba.getSelection(),null));}.bind(this),this.$RichComposedTextEditor8=function(ba,ca){this.props.onChange(c('RichTextEditorUtil').toggleLink(this.props.editorState,ba,ca));}.bind(this),this.$RichComposedTextEditor9=function(ba){this.props.onChange(c('EditorState').forceSelection(this.props.editorState,ba));}.bind(this),this.$RichComposedTextEditor10=function(ba,ca){if(this.props.canAttachPhoto){var da=c('EditorState').forceSelection(this.props.editorState,ba);return this.$RichComposedTextEditor11(da,ca);}else if(this.props.handleDroppedFiles)return this.props.handleDroppedFiles(ba,ca);return false;}.bind(this),this.$RichComposedTextEditor12=function(ba){if(this.props.canAttachPhoto){return this.$RichComposedTextEditor11(this.props.editorState,ba);}else if(this.props.handlePastedFiles)return this.props.handlePastedFiles(ba);return false;}.bind(this),this.$RichComposedTextEditor13=function(ba){this.props.onChange(u(this.props.editorState,ba,n));}.bind(this),this.$RichComposedTextEditor14=function(ba){this.props.onChange(u(this.props.editorState,ba,o));}.bind(this),this.$RichComposedTextEditor15=function(ba){this.props.onChange(u(this.props.editorState,ba,m));}.bind(this),this.$RichComposedTextEditor16=function(){this.props.onChange(c('EditorState').forceSelection(this.props.editorState,this.props.editorState.getSelection()));}.bind(this),this.focus=function(){this.refs.inlineStyleMenu.reset();this.refs.editor.focus();}.bind(this),x;}r.prototype.$RichComposedTextEditor11=function(w,x){var y=x[0];if(!y||y.type!='image/png'&&y.type!='image/jpeg')return false;var z=new FileReader();z.onload=function(aa){var ba=aa.target.result,ca=new Image();ca.src=ba;ca.onload=function(){var da=this.props.compositionID,ea={photo:y},fa={files:ea,compositionID:da},ga=this.props.editorState.getCurrentContent(),ha=ga.createEntity('IMAGE','IMMUTABLE',fa),ia=ha.getLastCreatedEntityKey(),ja=c('EditorState').set(w,{currentContent:ha});this.props.onChange(u(ja,ia,n));}.bind(this);}.bind(this);z.readAsDataURL(y);return true;};r.prototype.blur=function(){this.refs.editor.blur();};r.prototype.shouldComponentUpdate=function(w){return w.editorState!==this.props.editorState||w.readOnly!==this.props.readOnly;};r.prototype.render=function(){var w=this.props.editorState.getCurrentContent(),x=false;if(!w.hasText()){var y=w.getBlockMap().first().getType();x=y!=='unstyled';}var z=c('joinClasses')(this.props.className,"_4u4d"+(x?' '+"_4u4e":'')),aa=null,ba=null;if(!this.props.readOnly){aa=c('React').createElement(c('RichComposedTextEditorMenu.react'),{editorState:this.props.editorState,canAttachVideo:this.props.canAttachVideo,canAttachPhoto:this.props.canAttachPhoto,canAttachEmbed:this.props.canAttachEmbed,compositionID:this.props.compositionID,onToggleBlockType:this.$RichComposedTextEditor5,onAddEmbed:this.$RichComposedTextEditor15,onAddPhoto:this.$RichComposedTextEditor13,onAddVideo:this.$RichComposedTextEditor14,onCancelPhoto:this.$RichComposedTextEditor16,ownerID:this.props.ownerID});ba=c('React').createElement(c('RichComposedTextEditorInlineStyleMenu.react'),{ref:'inlineStyleMenu',editorState:this.props.editorState,onToggle:this.$RichComposedTextEditor6,onRemoveLink:this.$RichComposedTextEditor7,onAddLink:this.$RichComposedTextEditor8,onCancelLink:this.$RichComposedTextEditor9});}return c('React').createElement('div',{className:z,onClick:this.focus,role:'presentation'},c('React').createElement(c('AbstractMentionsTextEditor.react'),babelHelpers['extends']({},this.props,{ref:'editor',blockRendererFn:this.props.blockRendererFn,customStyleMap:q,mentionResultsComponent:c('MentionsLayer.react'),mentionResultsProps:{typeaheadView:c('XUITypeaheadView.react')},mentionCreationFn:c('createMentionEntity'),blockStyleFn:v,blockComponent:c('RichComposedTextEditorBlock.react'),onTab:this.$RichComposedTextEditor1,handleKeyCommand:this.$RichComposedTextEditor3,handleContentReturn:this.$RichComposedTextEditor2,handleDroppedFiles:this.$RichComposedTextEditor10,handlePastedFiles:this.$RichComposedTextEditor12,onChange:this.$RichComposedTextEditor4})),aa,ba);};r.propTypes={editorState:l.instanceOf(c('EditorState')).isRequired,canAttachVideo:l.bool,canAttachPhoto:l.bool,canAttachEmbed:l.bool,blockRendererFn:l.func,onSave:l.func.isRequired,ownerID:l.string.isRequired};function s(w){var x=w.getSelection(),y=x.getAnchorOffset(),z=w.getCurrentContent(),aa=z.getBlockForKey(x.getAnchorKey());if(x.isCollapsed()&&aa.getLength()===y&&t(aa.getType())){var ba=c('DraftModifier').splitBlock(z,x);return c('DraftModifier').setBlockType(ba,ba.getSelectionAfter(),'unstyled');}return null;}function t(w){return w==='blockquote'||w==='header-one'||w==='header-two';}function u(w,x,y){return c('AtomicBlockUtils').insertAtomicBlock(w,x,y);}function v(w){var x=w.getType();return "_2cuy"+(x==='unstyled'?' '+"_3dgx":'')+(x==='blockquote'?' '+"_509u":'')+(x==='header-one'?' '+"_509y":'')+(x==='header-two'?' '+"_50a1":'')+(x==='code-block'?' '+"_19ii":'')+(x==='unordered-list-item'?' '+"_509q":'')+(x==='ordered-list-item'?' '+"_509s":'')+(x==='atomic'?' '+"_4nuy":'');}f.exports=r;}),null);