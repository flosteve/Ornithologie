if (self.CavalryLogger) { CavalryLogger.start_js(["f1eJK"]); }

__d('WorkSidebarGroupRow.react',['cx','fbt','Image.react','ImageBlock.react','InlineBlock.react','Layout.react','Link.react','React'],(function a(b,c,d,e,f,g,h,i){var j=c('Layout.react').Column,k=c('Layout.react').FillColumn,l=c('React').PropTypes,m=c('React').createClass({displayName:'WorkSidebarGroupRow',propTypes:{id:l.string.isRequired,name:l.string.isRequired,icon:l.string.isRequired,newPosts:l.number.isRequired,uri:l.string.isRequired,onClick:l.func.isRequired},render:function n(){var o=this.props.newPosts!==0?c('React').createElement('div',{className:"ellipsis _1g10"},i._({"268435456":"{num_posts} new post","*":"{num_posts} new posts"},[i.param('num_posts',this.props.newPosts>=20?'20+':this.props.newPosts),i.plural(this.props.newPosts)])):null;return c('React').createElement(c('Link.react'),{className:"_1g11",href:this.props.uri,onClick:this.props.onClick},c('React').createElement(c('Layout.react'),null,c('React').createElement(k,null,c('React').createElement(c('ImageBlock.react'),{className:"_3-9a",spacing:'medium'},c('React').createElement('div',{className:"_1g12"},c('React').createElement(c('Image.react'),{className:"_1g13",src:this.props.icon})),c('React').createElement(c('InlineBlock.react'),{alignv:'middle',height:32,fullWidth:true},c('React').createElement('div',{className:"ellipsis"+(' '+"_1g14")+(this.props.newPosts!==0?' '+"_1g15":'')},this.props.name),o))),c('React').createElement(j,null,this.props.newPosts!==0?this._renderBlueDot():null)));},_renderBlueDot:function n(){return c('React').createElement(c('InlineBlock.react'),{alignv:'middle',height:32},c('React').createElement('span',{className:"_3-91 _3-99 _22tm"}));}});f.exports=m;}),null);
__d("XWorkTopGroupsAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/work\/top_groups\/",{group_ids:{type:"StringSet",required:true}});}),null);
__d('WorkSidebarGroupsSection.react',['cx','fbt','LayerFadeOnHide','LayerHideOnBlur','LayerHideOnTransition','Poller','SimpleNUXMessage','SimpleNUXMessageTypes','WorkSidebarGroupRow.react','XUIAmbientNUX.react','XWorkTopGroupsAsyncController','React'],(function a(b,c,d,e,f,g,h,i){var j=c('React').PropTypes,k=60000,l=c('React').createClass({displayName:'WorkSidebarGroupsSection',_poller:c('Poller'),propTypes:{groups:j.array.isRequired,showNux:j.bool},componentWillMount:function m(){this._startPoller();},componentWillUnmount:function m(){this._stopPoller();},getInitialState:function m(){var n={};this.props.groups.map(function(o){n[o.id]=o.newPosts;});return {newPosts:n,showNux:this.props.showNux};},render:function m(){var n=this.props.groups.map(function(p){return c('React').createElement(c('WorkSidebarGroupRow.react'),{id:p.id,key:'group'+p.id,name:p.name,icon:p.icon,newPosts:this.state.newPosts[p.id]||0,uri:p.uri,onClick:this._onGroupClick(p.id)});}.bind(this)),o=c('React').createElement('div',{className:"_5z3t _2ph-",ref:'header'},i._("YOUR TOP GROUPS"));return c('React').createElement('div',{className:"_1vze"},o,n,c('React').createElement(c('XUIAmbientNUX.react'),{contextRef:function(){return this.refs.header;}.bind(this),position:'left',shown:this.state.showNux,onCloseButtonClick:this._onCloseNux,onBeforeHide:this._onBlurNux,behaviors:{LayerFadeOnHide:c('LayerFadeOnHide'),LayerHideOnTransition:c('LayerHideOnTransition'),LayerHideOnBlur:c('LayerHideOnBlur')}},i._("You can see your most active groups here")));},_onGroupClick:function m(n){return function(){var o=this.state;o.newPosts[n]=0;this.setState(o);}.bind(this);},_onCloseNux:function m(){this.setState({showNux:false});},_onBlurNux:function m(){c('SimpleNUXMessage').markMessageSeenByUser(c('SimpleNUXMessageTypes').WORK_SIDEBAR_TOP_GROUPS);},_startPoller:function m(){var n=this.props.groups.map(function(p){return p.id;}),o=c('XWorkTopGroupsAsyncController').getURIBuilder().setStringSet('group_ids',n).getURI();this._poller=new (c('Poller'))({clearOnQuicklingEvents:false,interval:k,setupRequest:function(p){p.setURI(o).setMethod('GET').setReadOnly(true).setHandler(function(q){this.setState({newPosts:q.payload});}.bind(this)).setErrorHandler(function(){});}.bind(this)});},_stopPoller:function m(){this._poller&&this._poller.stop();}});f.exports=l;}),null);