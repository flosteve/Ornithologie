if (self.CavalryLogger) { CavalryLogger.start_js(["FmvAg"]); }

__d('GroupsComposerActionsTypes',['keyMirror'],(function a(b,c,d,e,f,g){var h=c('keyMirror')({SCHEDULE:null,SET_NUX_VISIBLE:null});f.exports=h;}),null);
__d('GroupsComposerActions',['GroupsComposerActionsTypes','ReactComposerDispatcher'],(function a(b,c,d,e,f,g){var h={schedule:function i(j,k){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('GroupsComposerActionsTypes').SCHEDULE,scheduleDate:k});},setNuxVisible:function i(j,k,l){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('GroupsComposerActionsTypes').SET_NUX_VISIBLE,nuxID:k,visible:l});}};f.exports=h;}),null);
__d("GroupsComposerNuxTypes",[],(function a(b,c,d,e,f,g){var h={SCHEDULE:4670};f.exports=h;}),null);
__d('ReactComposerMediaAttachmentPostButtonContainer.react',['ReactComposerMediaPostButtonContainerMixin','React'],(function a(b,c,d,e,f,g){var h=c('React').createClass({displayName:'ReactComposerMediaAttachmentPostButtonContainer',mixins:[c('ReactComposerMediaPostButtonContainerMixin')]});f.exports=h;}),null);
__d('ReactComposerMarkdownActionType',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){'use strict';f.exports=c('keyMirrorRecursive')({ENABLE_MARKDOWN:null,DISABLE_MARKDOWN:null,HIDE_INTERCEPT:null,SHOW_INTERCEPT:null},'ReactComposerMarkdownActionType');}),null);
__d('ReactComposerMarkdownStore',['ReactComposerMarkdownActionType','ReactComposerStoreBase'],(function a(b,c,d,e,f,g){'use strict';var h,i,j={UNKNOWN:0,CHECKING:1,ENABLED:2,DISABLED:3};h=babelHelpers.inherits(k,c('ReactComposerStoreBase'));i=h&&h.prototype;function k(){var l;i.constructor.call(this,function(){return {state:j.UNKNOWN};},function(m){switch(m.type){case c('ReactComposerMarkdownActionType').SHOW_INTERCEPT:l&&l.$ReactComposerMarkdownStore1(m);break;case c('ReactComposerMarkdownActionType').HIDE_INTERCEPT:l&&l.$ReactComposerMarkdownStore2(m);break;case c('ReactComposerMarkdownActionType').ENABLE_MARKDOWN:l&&l.$ReactComposerMarkdownStore3(m);break;case c('ReactComposerMarkdownActionType').DISABLE_MARKDOWN:l&&l.$ReactComposerMarkdownStore4(m);break;}});l=this;}k.prototype.showIntercept=function(l){return this.getComposerData(l).state===j.CHECKING;};k.prototype.interceptAttempted=function(l){var m=this.getComposerData(l),n=m.state;return n===j.ENABLED||n===j.DISABLED;};k.prototype.isMarkdownEnabled=function(l){return this.getComposerData(l).state===j.ENABLED;};k.prototype.$ReactComposerMarkdownStore1=function(l){var m=this.validateAction(l,['composerID']),n=this.getComposerData(m);n.state=j.CHECKING;this.emitChange(m);};k.prototype.$ReactComposerMarkdownStore2=function(l){var m=this.validateAction(l,['composerID']),n=this.getComposerData(m);n.state=j.UNKNOWN;this.emitChange(m);};k.prototype.$ReactComposerMarkdownStore3=function(l){var m=this.validateAction(l,['composerID']),n=this.getComposerData(m);n.state=j.ENABLED;this.emitChange(m);};k.prototype.$ReactComposerMarkdownStore4=function(l){var m=this.validateAction(l,['composerID']),n=this.getComposerData(m);n.state=j.DISABLED;this.emitChange(m);};f.exports=new k();}),null);
__d('ReactComposerGroupStore',['AsyncRequest','ReactComposerActionStore','ReactComposerMediaConfig','ReactComposerPostUtils','GroupsComposerActionsTypes','XBasicFBNuxDismissController','XBasicFBNuxViewController','formatDate'],(function a(b,c,d,e,f,g){var h,i,j={scheduledPublishTime:null,visibleNuxes:[]};h=babelHelpers.inherits(k,c('ReactComposerActionStore'));i=h&&h.prototype;function k(){'use strict';var l;i.constructor.call(this,function(){return Object.assign({},j);},function(m){switch(m.type){case c('GroupsComposerActionsTypes').SCHEDULE:l&&l.$ReactComposerGroupStore1(m);break;case c('GroupsComposerActionsTypes').SET_NUX_VISIBLE:l&&l.$ReactComposerGroupStore2(m);break;}});l=this;}k.prototype.getIsNuxVisible=function(l,m){'use strict';var n=this.getComposerData(l);return !!n.visibleNuxes[m];};k.prototype.__onPostStarted=function(l){'use strict';var m=this.getComposerData(l.composerID),n=m.scheduledPublishTime;if(n){var o=c('formatDate')(n,'m/d/Y',{skipPatternLocalization:true}),p=60*(60*n.getHours()+n.getMinutes()),q=n.getTime()/1000;l.config.contextInfo.scheduled=true;l.config.contextInfo.future_date=o;l.config.contextInfo.future_time=p;l.config.contextInfo.scheduled_publish_time=q;}else{l.config.contextInfo.scheduled=false;l.config.contextInfo.future_date=null;l.config.contextInfo.future_time=null;l.config.contextInfo.scheduled_publish_time=null;}var r=m.visibleNuxes;r.forEach(function(s,t){this.$ReactComposerGroupStore2({composerID:l.composerID,type:c('GroupsComposerActionsTypes').SET_NUX_VISIBLE,nuxID:t,visible:false});}.bind(this));c('ReactComposerPostUtils').post({actorID:l.actorID,composerConfig:l.config,composerID:l.composerID,targetID:l.targetID});};k.prototype.__canPost=function(l){'use strict';return !c('ReactComposerPostUtils').isPostButtonDisabled(l.composerID,c('ReactComposerMediaConfig').photo.limit);};k.prototype.$ReactComposerGroupStore1=function(l){'use strict';var m=this.getComposerData(l.composerID);m.scheduledPublishTime=l.scheduleDate;};k.prototype.$ReactComposerGroupStore2=function(l){'use strict';var m=this.getComposerData(l.composerID),n=l.nuxID,o=m.visibleNuxes[n],p=l.visible;if(o===undefined&&p){var q=c('XBasicFBNuxViewController').getURIBuilder().setInt('nux_id',n).getURI();new (c('AsyncRequest'))().setURI(q).send();m.visibleNuxes[n]=true;this.emitChange(l.composerID);}else if(o===true&&!p){var r=c('XBasicFBNuxDismissController').getURIBuilder().setInt('nux_id',n).getURI();new (c('AsyncRequest'))().setURI(r).send();m.visibleNuxes[n]=false;this.emitChange(l.composerID);}};f.exports=new k();}),null);
__d('ReactComposerGroupPostButtonContainer.react',['ix','cx','fbt','invariant','BootloadedComponent.react','Bootloader','ReactComposerActions','ReactComposerAttachmentStore','ReactComposerAttachmentType','ReactComposerConfig','ReactComposerContextMixin','ReactComposerFileStore','ReactComposerGroupStore','ReactComposerMarkdownStore','ReactComposerMediaAttachmentPostButtonContainer.react','ReactComposerMediaUploadStore','ReactComposerOptimisticPostingStore','ReactComposerPhotoStore','ReactComposerPostButtonContainer.react','ReactComposerPostUtils','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerSellStore','ReactComposerStore','ReactComposerVideoUploadStore','ReactComposerWorkFileStore','ContextualDialogArrow','GroupsComposerActions','GroupsComposerNuxTypes','GroupSellInterceptUtil','Image.react','JSResource','LoadingDialog.react','PageTransitions','PopoverMenu.react','ReactComponentWithPureRenderMixin','React','ReactFragment','ReactLayeredComponentMixin_DEPRECATED','XUIAmbientNUX.react','XUIButton.react','ReactXUIMenu','fbglyph'],(function a(b,c,d,e,f,g,h,i,j,k){var l=c('ReactComposerWorkFileStore').module,m=c('ReactXUIMenu').Item,n=l||c('ReactComposerFileStore'),o=c('React').createClass({displayName:'ReactComposerGroupPostButtonContainer',mixins:[c('ReactComposerContextMixin'),c('ReactComponentWithPureRenderMixin'),c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerAttachmentStore'),c('ReactComposerPhotoStore'),c('ReactComposerMediaUploadStore'),c('ReactComposerSellStore'),c('ReactComposerStore'),c('ReactComposerVideoUploadStore'),c('ReactComposerMarkdownStore'),c('ReactComposerGroupStore'),c('ReactComposerOptimisticPostingStore'),n),c('ReactLayeredComponentMixin_DEPRECATED')],propTypes:{config:c('ReactComposerConfig').isRequired},statics:{calculateState:function p(q,r,s){var t=r.config.attachmentsConfig[c('ReactComposerAttachmentType').MEDIA],u=c('ReactComposerPostUtils').isPostButtonDisabled(q,t.photoLimit),v=c('ReactComposerStore').isPosting(q),w=c('ReactComposerOptimisticPostingStore').isOptimisticallyPosting(q),x=c('ReactComposerAttachmentStore').getSelectedAttachmentID(q);return {currencySymbol:c('ReactComposerSellStore').getCurrencySymbol(q),interceptWords:c('ReactComposerSellStore').getInterceptWords(q),interceptWordsAfterNumber:c('ReactComposerSellStore').getInterceptedWordsAfterNumber(q),isDialogShown:c('ReactComposerSellStore').showURLIntercept(q)||c('ReactComposerMarkdownStore').showIntercept(q),selectedAttachment:x,showScheduleNux:c('ReactComposerGroupStore').getIsNuxVisible(q,c('GroupsComposerNuxTypes').SCHEDULE),disabled:v||w||x===c('ReactComposerAttachmentType').MEDIA&&u||x===c('ReactComposerAttachmentType').FILE&&!n.isFileSelected(q)};}},getInitialState:function p(){return {isSchedulePostDialogShown:false};},_performInterceptAttempt:function p(q,r){if(this._showSellIntercept())return true;if(c('GroupSellInterceptUtil').shouldAttemptInterceptReact(q,r,this.state.interceptWords,this.state.interceptWordsAfterNumber,this.state.currencySymbol)){this.setState({isDialogShown:true});return false;}return true;},componentDidMount:function p(){c('ReactComposerGroupStore').registerComposerID(this.context.composerID);this._setScheduleNuxVisible(this._shouldSeeScheduleNux());c('PageTransitions').registerHandler(this._hideScheduleNux,10);if(this._shouldAttemptIntercept()){c('ReactComposerActions').registerPostIntendedHandler(function(q,r,s,t){return this._performInterceptAttempt(q,t);}.bind(this));c('Bootloader').loadModules(["GroupSellInterceptDialogContainer.react"],function(q){this.setState({sellInterceptDialog:q});}.bind(this),'ReactComposerGroupPostButtonContainer.react');}if(this._shouldAttemptMarkdownIntercept())c('Bootloader').loadModules(["MarkdownInterceptDialogContainer.react"],function(q){this.setState({markdownInterceptDialog:q});}.bind(this),'ReactComposerGroupPostButtonContainer.react');},componentWillUnmount:function p(){c('PageTransitions').removeHandler(this._hideScheduleNux);},render:function p(){var q=this.state.sellInterceptDialog||this.state.markdownInterceptDialog;return c('React').createElement('div',{className:"_332r"},this._isMediaAttachment()?c('React').createElement(c('ReactComposerMediaAttachmentPostButtonContainer.react'),babelHelpers['extends']({},this.props,{config:this.props.config,onClickPreprocess:this._onClickPreprocess,forceDisabled:this.state.disabled})):c('React').createElement(c('ReactComposerPostButtonContainer.react'),babelHelpers['extends']({},this.props,{config:this.props.config,onClickPreprocess:this._onClickPreprocess,forceDisabled:this.state.disabled})),this._getScheduleButton(),this._renderScheduleDialog(),q&&this.state.isDialogShown?c('React').createElement(q,{config:this.props.config}):null);},renderLayers:function p(){return c('ReactFragment').create({schedule_nux:c('React').createElement(c('XUIAmbientNUX.react'),{contextRef:function(){return this.refs.schedule_menu;}.bind(this),shown:this.state.showScheduleNux,onCloseButtonClick:this._hideScheduleNux,position:'above'},j._("New! Now you can schedule your posts to be published at a later time."))});},_canSchedule:function p(){var q=this.props.config,r=q.actorConfig,s=q.attachmentsConfig;return !!r&&r.canSchedule&&!!s[this.state.selectedAttachment]&&s[this.state.selectedAttachment].canSchedule!==false;},_shouldSeeScheduleNux:function p(){return this._canSchedule()&&this.props.config.actorConfig.shouldShowScheduleNux;},_isMediaAttachment:function p(){return this.state.selectedAttachment===c('ReactComposerAttachmentType').MEDIA;},_getScheduleButton:function p(){if(!this._canSchedule())return null;return c('React').createElement(c('PopoverMenu.react'),{className:"_1meg",menu:this._renderMenu(),alignh:'right',alignv:'middle',layerBehaviors:[c('ContextualDialogArrow')],position:'below',ref:'schedule_menu',onClick:this._hideScheduleNux,disabled:this.state.disabled},c('React').createElement(c('XUIButton.react'),{disabled:this.state.disabled,imageRight:c('React').createElement(c('Image.react'),{src:h("115692")}),label:j._("Down"),labelIsHidden:true,size:'medium',use:'confirm'}));},_renderScheduleDialog:function p(){if(!this.state.isSchedulePostDialogShown)return null;!!this.props.config.actorConfig||k(0);var q=this.props.config.actorConfig,r=q.timezoneStr,s=q.minScheduledTimeDelta,t=q.maxScheduledTimeDelta,u=q.defaultScheduledTimeDelta,v=q.enableScheduleTimeTemplates;return c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:v?c('JSResource')('GroupPostAdvancedScheduleDialog.react').__setRef('ReactComposerGroupPostButtonContainer.react'):c('JSResource')('GroupPostScheduleDialog.react').__setRef('ReactComposerGroupPostButtonContainer.react'),bootloadPlaceholder:c('React').createElement(c('LoadingDialog.react'),null),onToggle:function(w){return this.setState({isSchedulePostDialogShown:w});}.bind(this),timezoneStr:r,onSubmit:this._onScheduledTimeSelected,minScheduledTimeDelta:s,maxScheduledTimeDelta:t,defaultScheduledTimeDelta:u});},_onScheduledTimeSelected:function p(q){c('GroupsComposerActions').schedule(this.context.composerID,q);c('ReactComposerActions').postStarted(this.context.composerID,{actorID:this.context.actorID,composerType:this.context.composerType,config:this.props.config,targetID:this.context.targetID});},_renderMenu:function p(){return c('React').createElement(c('ReactXUIMenu'),null,c('React').createElement(m,{onclick:function(){return this.setState({isSchedulePostDialogShown:true});}.bind(this)},j._("Schedule")));},_hideScheduleNux:function p(){this._setScheduleNuxVisible(false);},_setScheduleNuxVisible:function p(q){c('GroupsComposerActions').setNuxVisible(this.context.composerID,c('GroupsComposerNuxTypes').SCHEDULE,q);},_shouldAttemptIntercept:function p(){var q=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').STATUS];return q.attemptIntercept;},_shouldAttemptMarkdownIntercept:function p(){var q=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').STATUS];return q.attemptMarkdownIntercept;},_showSellIntercept:function p(){var q=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').STATUS];return q.sellIntercept;},_onClickPreprocess:function p(){if(this._shouldAttemptIntercept()){var q=this.context.composerID,r=this.context.targetID;return this._performInterceptAttempt(q,r);}return true;}});f.exports=o;}),null);